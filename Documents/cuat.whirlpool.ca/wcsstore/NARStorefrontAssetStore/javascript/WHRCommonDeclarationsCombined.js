var order_updated={AjaxAddOrderItem:"AjaxAddOrderItem",AjaxAddOrderItemWithShipingInfo:"AjaxAddOrderItemWithShipingInfo",AjaxDeleteOrderItem:"AjaxDeleteOrderItem",AjaxUpdateOrderItem:"AjaxUpdateOrderItem",AjaxUpdateOrderShippingInfo:"AjaxUpdateOrderShippingInfo",AjaxOrderCalculate:"AjaxOrderCalculate",AjaxLogoff:"AjaxLogoff",AjaxSubmitOrder:"AjaxSubmitOrder",AjaxSetPendingOrder:"AjaxSetPendingOrder",AjaxUpdatePendingOrder:"AjaxUpdatePendingOrder",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxUpdateRewardOption:"AjaxUpdateRewardOption"};var address_updated={AjaxDeleteAddressForPerson:"AjaxDeleteAddressForPerson",AjaxAddAddressForPerson:"AjaxAddAddressForPerson",AjaxUpdateAddressForPerson:"AjaxUpdateAddressForPerson",AjaxAddShippingAndBillingAddressForPersonDuringCheckout:"AjaxAddShippingAndBillingAddressForPersonDuringCheckout"};var user_changed={AjaxLogonService:"AjaxLogonService",AjaxLogoff:"AjaxLogoff"};var wishlist_changed={AjaxInterestItemAdd:"AjaxInterestItemAdd",AjaxInterestItemDelete:"AjaxInterestItemDelete",AjaxLogonService:"AjaxLogonService",AjaxLogoff:"AjaxLogoff"};var listorders_changed={AjaxOrderCreate:"AjaxOrderCreate",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxSingleOrderSave:"AjaxSingleOrderSave",AjaxCurrentOrderCalculate:"AjaxCurrentOrderCalculate",AjaxSingleOrderCalculate:"AjaxSingleOrderCalculate",AjaxAddOrderItem:"AjaxAddOrderItem"};dojo.require("wc.render.common");CommonContextsJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;},setContextProperty:function(contextId,property,value){wc.render.getContextById(contextId).properties[property]=value;}};wc.render.declareContext("multipleShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("singleShipmentShipChargeContext",null,""),wc.render.declareContext("multipleShipmentShipChargeContext",null,""),wc.render.declareContext("traditionalShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("currentOrder_Context",null,""),wc.render.declareContext("editShippingAddressContext",{shippingAddress:"0",addressType:"ShippingAndBilling"},"","Main"),wc.render.declareContext("billingAddressDropDownBoxContext",{billingAddress1:"0",billingAddress2:"0",billingAddress3:"0",billingURL1:"",billingURL2:"",billingURL3:"",areaNumber:"0",payment1:"",payment2:"",payment3:"",paymentTCId1:"",paymentTCId2:"",paymentTCId3:""},""),wc.render.declareContext("contextForMainAndAddressDiv",{showArea:"0",hideArea:"0"},""),wc.render.declareContext("shippingAddressDropDownBoxContext",null,""),wc.render.declareContext("MiniShoppingCartContext",null,""),wc.render.declareContext("MiniShopCartDropDownContext",null,""),wc.render.declareContext("CategoryDisplay_Context",{pageView:"",beginIndex:""},""),wc.render.declareContext("SubCategoryDisplay_Context",null,""),wc.render.declareContext("WishlistDisplay_Context",{url:""},""),wc.render.declareContext("ShopCartPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderDetailPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("MSOrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("CouponDisplay_Context",null,""),wc.render.declareContext("PromotionFreeGifts_Context",null,""),wc.render.declareContext("ListOrdersDisplay_Context",{startNumber:"0"},"");wc.render.declareContext("ScheduledOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"Scheduled"},""),wc.render.declareContext("ProcessedOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"PreviouslyProcessed"},""),wc.render.declareContext("WaitingForApprovalOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"WaitingForApproval"},""),wc.render.declareContext("HeaderGreetingsContext",null,""),wc.render.declareContext("MiniWishListContext",{refreshMiniWishList:"false"},"");dojo.require("wc.render.common");CommonControllersDeclarationJS={langId:"-1",storeId:"",catalogId:"",ajaxCheckOut:true,setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;},setControllerURL:function(controllerId,url){wc.render.getRefreshControllerById(controllerId).url=url;}};wc.render.declareRefreshController({id:"MiniShoppingCartController",renderContext:wc.render.getContextById("MiniShoppingCartContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated||message.actionId=="AjaxDeleteOrderItemForShippingBillingPage"){var param=[];if(message.actionId=="AjaxAddOrderItem"){param.addedOrderItemId=message.orderItemId+"";wantShowMiniShopcartDropdown=true;}miniShopcartRefreshPending=true;widget.refresh(param);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;destroyDialog();if(wantShowMiniShopcartDropdown){showMiniShopCartDropDown("placeHolder","quick_cart_container","orderItemAdded");wantShowMiniShopcartDropdown=false;}miniShopcartRefreshPending=false;if(typeof(swapCartMessage)=="function"){swapCartMessage();}}}),wc.render.declareRefreshController({id:"CategoryDisplay_Controller",renderContext:wc.render.getContextById("CategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();var historyObject=new categoryDisplayJS.HistoryTracker("CategoryDisplay_Widget",controller.url+identifier);dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"SubCategoryDisplay_Controller",renderContext:wc.render.getContextById("SubCategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();var historyObject=new categoryDisplayJS.HistoryTracker("SubCategoryDisplay_Widget",controller.url+identifier);dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"WishlistDisplay_Controller",renderContext:wc.render.getContextById("WishlistDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;AccountWishListDisplay.contextChanged=true;widget.refresh(renderContext.properties);},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="InterestItemDelete"){controller.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url;widget.refresh(renderContext.properties);}if(message.actionId=="AjaxInterestItemAdd"){controller.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url;widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(AccountWishListDisplay.contextChanged&&(!AccountWishListDisplay.isHistory)){var identifier="&identifier="+(new Date()).getTime();var accountDisplayURL=renderContext.properties.url;if(accountDisplayURL==null||accountDisplayURL==""){accountDisplayURL=controller.url;}else{accountDisplayURL=accountDisplayURL;}var historyObject=new AccountWishListDisplay.HistoryTracker("WishlistDisplay_Widget",accountDisplayURL+identifier,controller.url+identifier);dojo.back.addToHistory(historyObject);AccountWishListDisplay.contextChanged=false;AccountWishListDisplay.isHistory=false;}cursor_clear();initTB();}}),wc.render.declareRefreshController({id:"ShopCartDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){if(typeof(savedOrdersJS)!=null&&typeof(savedOrdersJS)!="undefined"){savedOrdersJS.isCurrentOrderPage(true);}var controller=this;if(document.getElementById("discountDetailsSection")!=null){document.getElementById("discountDetailsSection").style.display="block";}if(document.getElementById("appliedPromotionCodes")!=null){document.getElementById("appliedPromotionCodes").style.display="block";}if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}CheckoutHelperJS.displayGiftMsg();cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}}}),wc.render.declareRefreshController({id:"PendingOrderPaginationDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"OrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"MSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"CouponDisplay_Controller",renderContext:wc.render.getContextById("CouponDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="AjaxCouponsAddRemove"){widget.refresh(renderContext.properties);}}}),wc.render.declareRefreshController({id:"PromotionFreeGifts_Controller",renderContext:wc.render.getContextById("PromotionFreeGifts_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();PromotionChoiceOfFreeGiftsJS.showFreeGiftsDialog();}}),wc.render.declareRefreshController({id:"ListOrdersDisplay_Controller",renderContext:wc.render.getContextById("ListOrdersDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in listorders_changed){if((message.actionId=="AjaxOrderCreate"||message.actionId=="AjaxSingleOrderCalculate")&&this.renderContext.properties.startNumber!=0){wc.render.updateContext("ListOrdersDisplay_Context",{startNumber:0});}else{widget.refresh(renderContext.properties);}}},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["startNumber"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(savedOrdersJS.updateCurrentOrder){savedOrdersJS.initializeCurrentOrder();savedOrdersJS.updateCurrentOrder=false;}savedOrdersJS.updateToolbar();savedOrdersJS.checkAllIfNeeded();}}),wc.render.declareRefreshController({id:"PendingOrderDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated){this.currentDesc=document.getElementById("OrderDescription_input").value;widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;cursor_clear();if(this.currentDesc!=document.getElementById("OldOrderDescription").value){var inputElement=document.getElementById("OrderDescription_input");if(inputElement!=null&&inputElement!="undefined"){inputElement.value=this.currentDesc;dojo.removeClass(inputElement,"savedOrderDetailsInputBorder");dojo.addClass(inputElement,"savedOrderDetailsInputBorderWarning");}}}}),wc.render.declareRefreshController({id:"HeaderGreetingsController",renderContext:wc.render.getContextById("HeaderGreetingsContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="UserRegistrationUpdate"){widget.refresh();}},postRefreshHandler:function(widget){}}),wc.render.declareRefreshController({id:"MiniWishListController",renderContext:wc.render.getContextById("MiniWishListContext"),url:"",formId:"",modelChangedHandler:function(message,widget){if(message.actionId=="migrateUnregisteredUserWL"||message.actionId=="AjaxInterestItemAdd"||message.actionId=="InterestItemDelete"){if(message.actionId=="AjaxInterestItemAdd"){showLastAddedItemInMiniWishList=true;var param=[];param.addedCatEntryId=message.catEntryId;widget.refresh(param);}else{widget.refresh();}}},renderContextChangedHandler:function(message,widget){widget.refresh();},postRefreshHandler:function(widget){var noOfWishListItems=document.getElementById("wishListNoOfItems").value;var noOfWishListItemsString=" ("+noOfWishListItems+")";var wishListHeaderText=document.getElementById("wishListHeaderText").value;document.getElementById("wishListHeaderAnchor").innerHTML=wishListHeaderText+noOfWishListItemsString;dojo.cookie("userWishListCount",noOfWishListItems,{expires:1,path:"/"});showMiniWishListDropDown();}});MiniWishListJS={langId:"-1",storeId:"",catalogId:"",userType:"",cookieAge:"90",setCommonParameters:function(langId,storeId,catalogId,userType){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;this.userType=userType;},setValueToCookie:function(cookieKey,cookieValue,cookieAge){var newValue=cookieValue;if(newValue!=null&&newValue!="undefined"&&newValue!=""){var currentValue=dojo.cookie(cookieKey);if(newValue!=currentValue){dojo.cookie(cookieKey,null,{expires:-1,path:"/"});cookieAge=parseInt(cookieAge);dojo.cookie(cookieKey,newValue,{expires:cookieAge,path:"/"});}}},clearFromCookie:function(cookieKey){var currentValue=dojo.cookie(cookieKey);if(currentValue!=null&&currentValue!="undefined"){dojo.cookie(cookieKey,null,{expires:-1,path:"/"});}},migrateUnregisteredUserWL:function(){wc.service.declare({id:"migrateUnregisteredUserWL",actionId:"migrateUnregisteredUserWL",url:getAbsoluteURL()+"AjaxMigrateUnregisterWishList",formId:"",successHandler:function(serviceResponse){var userId=serviceResponse.userId;var updateCookie=serviceResponse.updateCookie;if(updateCookie=="true"){MiniWishListJS.saveGUIdToCookieForWL(userId);}},failureHandler:function(serviceResponse){return false;}});var cmdParams=[];cmdParams.langId=this.langId;cmdParams.storeId=this.storeId;cmdParams.catalogId=this.catalogId;cmdParams.userType=this.userType;wc.service.invoke("migrateUnregisteredUserWL",cmdParams);},saveGUIdToCookieForWL:function(userId){var guestUserId=dojo.cookie("unRegWishListClientId");if(this.userType=="G"){this.setValueToCookie("unRegWishListClientId",userId,this.cookieAge);}}};