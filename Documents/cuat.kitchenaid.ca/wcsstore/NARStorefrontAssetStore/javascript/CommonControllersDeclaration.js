dojo.require("wc.render.common");CommonControllersDeclarationJS={langId:"-1",storeId:"",catalogId:"",ajaxCheckOut:true,setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;},setControllerURL:function(controllerId,url){wc.render.getRefreshControllerById(controllerId).url=url;}};wc.render.declareRefreshController({id:"MiniShoppingCartController",renderContext:wc.render.getContextById("MiniShoppingCartContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated||message.actionId=="AjaxDeleteOrderItemForShippingBillingPage"){var param=[];if(message.actionId=="AjaxAddOrderItem"){param.addedOrderItemId=message.orderItemId+"";wantShowMiniShopcartDropdown=true;}miniShopcartRefreshPending=true;widget.refresh(param);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;destroyDialog();if(wantShowMiniShopcartDropdown){showMiniShopCartDropDown("placeHolder","quick_cart_container","orderItemAdded");wantShowMiniShopcartDropdown=false;}miniShopcartRefreshPending=false;if(typeof(swapCartMessage)=="function"){swapCartMessage();}}}),wc.render.declareRefreshController({id:"CategoryDisplay_Controller",renderContext:wc.render.getContextById("CategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();var historyObject=new categoryDisplayJS.HistoryTracker("CategoryDisplay_Widget",controller.url+identifier);dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}if(typeof gtmHelper!="undefined"){gtmHelper.processScripts();}cursor_clear();}}),wc.render.declareRefreshController({id:"SubCategoryDisplay_Controller",renderContext:wc.render.getContextById("SubCategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;categoryDisplayJS.contextChanged=true;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(categoryDisplayJS.contextChanged&&(!categoryDisplayJS.isHistory)){var identifier="&identifier="+(new Date()).getTime();var historyObject=new categoryDisplayJS.HistoryTracker("SubCategoryDisplay_Widget",controller.url+identifier);dojo.back.addToHistory(historyObject);categoryDisplayJS.contextChanged=false;categoryDisplayJS.isHistory=false;}cursor_clear();}}),wc.render.declareRefreshController({id:"WishlistDisplay_Controller",renderContext:wc.render.getContextById("WishlistDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;AccountWishListDisplay.contextChanged=true;widget.refresh(renderContext.properties);},modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="InterestItemDelete"){controller.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url;widget.refresh(renderContext.properties);}if(message.actionId=="AjaxInterestItemAdd"){controller.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url;widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(AccountWishListDisplay.contextChanged&&(!AccountWishListDisplay.isHistory)){var identifier="&identifier="+(new Date()).getTime();var accountDisplayURL=renderContext.properties.url;if(accountDisplayURL==null||accountDisplayURL==""){accountDisplayURL=controller.url;}else{accountDisplayURL=accountDisplayURL;}var historyObject=new AccountWishListDisplay.HistoryTracker("WishlistDisplay_Widget",accountDisplayURL+identifier,controller.url+identifier);dojo.back.addToHistory(historyObject);AccountWishListDisplay.contextChanged=false;AccountWishListDisplay.isHistory=false;}if(AccountWishListDisplay.storeFlow=="GGW"&&categoryDisplayJS.expandCollapsSection!=""){$("#"+categoryDisplayJS.expandCollapsSection).addClass("close-collapse-trigger");$("#"+categoryDisplayJS.expandCollapsSection).parent().parent().parent().addClass("expand-collapse-show");categoryDisplayJS.expandCollapsSection="";}cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){if(typeof(savedOrdersJS)!=null&&typeof(savedOrdersJS)!="undefined"){savedOrdersJS.isCurrentOrderPage(true);}var controller=this;if(document.getElementById("discountDetailsSection")!=null){document.getElementById("discountDetailsSection").style.display="block";}if(document.getElementById("appliedPromotionCodes")!=null){document.getElementById("appliedPromotionCodes").style.display="block";}if(document.getElementById("promocode-see-list")!=null){rebindPromoListFancyBox();}if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}CheckoutHelperJS.displayGiftMsg();if(categoryDisplayJS.storeFlow=="GGW"&&categoryDisplayJS.expandCollapsSection!=""){$("#"+categoryDisplayJS.expandCollapsSection).addClass("close-collapse-trigger");$("#"+categoryDisplayJS.expandCollapsSection).parent().parent().parent().addClass("expand-collapse-show");categoryDisplayJS.expandCollapsSection="";}cursor_clear();}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(document.getElementById("promocode-see-list")!=null){rebindPromoListFancyBox();}cursor_clear();if(!CheckoutHelperJS.isAjaxCheckOut()){CheckoutHelperJS.setFieldDirtyFlag(false);CheckoutHelperJS.initDojoEventListenerShoppingCartPage();}}}),wc.render.declareRefreshController({id:"PendingOrderPaginationDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"OrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();}}),wc.render.declareRefreshController({id:"MSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["beginIndex"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();$("#order_details tr").each(function(){if($(this).children("th").length<=0){$(this).addClass("nodisplay");}});}}),wc.render.declareRefreshController({id:"CouponDisplay_Controller",renderContext:wc.render.getContextById("CouponDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="AjaxCouponsAddRemove"){widget.refresh(renderContext.properties);}}}),wc.render.declareRefreshController({id:"PromotionFreeGifts_Controller",renderContext:wc.render.getContextById("PromotionFreeGifts_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;widget.refresh(renderContext.properties);},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;cursor_clear();PromotionChoiceOfFreeGiftsJS.showFreeGiftsDialog();}}),wc.render.declareRefreshController({id:"ListOrdersDisplay_Controller",renderContext:wc.render.getContextById("ListOrdersDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in listorders_changed){if((message.actionId=="AjaxOrderCreate"||message.actionId=="AjaxSingleOrderCalculate")&&this.renderContext.properties.startNumber!=0){wc.render.updateContext("ListOrdersDisplay_Context",{startNumber:0});}else{widget.refresh(renderContext.properties);}}},renderContextChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(controller.testForChangedRC(["startNumber"])){widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;var renderContext=this.renderContext;if(savedOrdersJS.updateCurrentOrder){savedOrdersJS.initializeCurrentOrder();savedOrdersJS.updateCurrentOrder=false;}savedOrdersJS.updateToolbar();savedOrdersJS.checkAllIfNeeded();}}),wc.render.declareRefreshController({id:"PendingOrderDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId in order_updated){this.currentDesc=document.getElementById("OrderDescription_input").value;widget.refresh(renderContext.properties);}},postRefreshHandler:function(widget){var controller=this;cursor_clear();if(this.currentDesc!=document.getElementById("OldOrderDescription").value){var inputElement=document.getElementById("OrderDescription_input");if(inputElement!=null&&inputElement!="undefined"){inputElement.value=this.currentDesc;dojo.removeClass(inputElement,"savedOrderDetailsInputBorder");dojo.addClass(inputElement,"savedOrderDetailsInputBorderWarning");}}}}),wc.render.declareRefreshController({id:"HeaderGreetingsController",renderContext:wc.render.getContextById("HeaderGreetingsContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId=="UserRegistrationUpdate"){widget.refresh();}},postRefreshHandler:function(widget){}}),wc.render.declareRefreshController({id:"MiniWishListController",renderContext:wc.render.getContextById("MiniWishListContext"),url:"",formId:"",modelChangedHandler:function(message,widget){if(message.actionId=="migrateUnregisteredUserWL"||message.actionId=="AjaxInterestItemAdd"||message.actionId=="InterestItemDelete"){if(message.actionId=="AjaxInterestItemAdd"){showLastAddedItemInMiniWishList=true;var param=[];param.addedCatEntryId=message.catEntryId;widget.refresh(param);}else{widget.refresh();}}},renderContextChangedHandler:function(message,widget){widget.refresh();},postRefreshHandler:function(widget){var noOfWishListItems=document.getElementById("wishListNoOfItems").value;var noOfWishListItemsString=" ("+noOfWishListItems+")";var wishListHeaderText=document.getElementById("wishListHeaderText").value;document.getElementById("wishListHeaderAnchor").innerHTML=wishListHeaderText+noOfWishListItemsString;dojo.cookie("userWishListCount",noOfWishListItems,{expires:1,path:"/"});showMiniWishListDropDown();}});