dojo.require("wc.service.common");ServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",storeFlow:"",setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;},setStoreFlow:function(storeFlow){this.storeFlow=storeFlow;}};wc.service.declare({id:"AjaxInterestItemAddAndDeleteFromCart",actionId:"AjaxInterestItemAddAndDeleteFromCart",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();requestSubmitted=false;if(serviceResponse.roomGroupId!=null){CheckoutHelperJS.deleteRoomFromCart(serviceResponse.roomGroupId);}else{CheckoutHelperJS.deleteFromCart(serviceResponse.orderItemId);}MessageHelper.displayStatusMessage(MessageHelper.messages.WISHLIST_ADDED);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddOrderItem",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){if(serviceResponse.DSATCSuccess=="true"){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ITEM_ADDED_TO_CART_FROM_DS);cursor_clear();}else{if(serviceResponse.DSATCSuccess=="false"){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages._ERR_ADDING_ITEM_TO_CART_FROM_DS);cursor_clear();}else{if(categoryDisplayJS.allowAddToCartModal&&categoryDisplayJS.storeFlow=="GGW"){MessageHelper.hideAndClearMessage();}else{MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_ADDED);cursor_clear();}}}cursor_clear();if(categoryDisplayJS){var attributes=document.getElementsByName("attrValue");var singleSKU=true;for(var i=0;i<attributes.length;i++){if(attributes[i].options.length>1){singleSKU=false;}}if(!singleSKU){categoryDisplayJS.selectedAttributes=[];for(var i=0;i<attributes.length;i++){if(attributes[i]!=null){attributes[i].value="";}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(serviceResponse.orderItemId[0]);}if(categoryDisplayJS.allowAddToCartModal&&categoryDisplayJS.storeFlow=="GGW"){categoryDisplayJS.allowAccessoryDialog=false;categoryDisplayJS.displayErrorMsg=false;var addToCartModalWindow=dojo.byId("add-to-cart-modal");var modalWindowAlreadyOpened="";if(addToCartModalWindow!=null){modalWindowAlreadyOpened=document.getElementById("showAddToCartModal").value;}if(addToCartModalWindow==null||modalWindowAlreadyOpened==""){dojo.xhrPost({url:getAbsoluteURL()+"AjaxWHRCatalogEntryModalDisplayView",handleAs:"text",content:{storeId:ServicesDeclarationJS.storeId,catalogId:ServicesDeclarationJS.catalogId,langId:ServicesDeclarationJS.langId,orderId:serviceResponse.orderId[0],orderItemId:serviceResponse.orderItemId[0]},service:this,load:function(response,ioArgs){var mainDiv=dojo.byId("add-to-cart-modal");if(dojo.byId("add-to-cart-modal")==undefined){mainDiv=dojo.create("div",{id:"add-to-cart-modal",innerHTML:response},dojo.body());}else{mainDiv.innerHTML=response;}MessageHelper.hideAndClearMessage();MessageHelper.hideAndClearMessageInCustomAreas("ErrorMessageText_ModalWin","MessageArea_ModalWin");MessageHelper.displayStatusMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",MessageHelper.messages.SHOPCART_ADDED);if(document.getElementById("close_model_win")){document.getElementById("close_model_win").focus();}showAddToCartModal();document.getElementById("showAddToCartModal").value="true";},error:function(errObj,ioArgs){console.debug("An error occurred during accessory dialog xhrPost request: "+dojo.toJson(errObj));showMiniShopCart();}});}else{var itemAddedfromModal=document.getElementById("itemAddedFromModal").value;var modalElementId="btn_"+itemAddedfromModal;document.getElementById(modalElementId).innerHTML=document.getElementById("itemInCartMsg").value;document.getElementById(modalElementId).href="javascript:;";document.getElementById(modalElementId).className="content-btn add-to-cart-btn item-in-cart";document.getElementById("itemAddedFromModal").value="";MessageHelper.hideAndClearMessage();MessageHelper.hideAndClearMessageInCustomAreas("ErrorMessageText_ModalWin","MessageArea_ModalWin");MessageHelper.displayStatusMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",MessageHelper.messages.SHOPCART_ADDED);}}miniShopcartRefreshPending=true;var showMiniShopCart=function(){if(miniShopcartRefreshPending){wantShowMiniShopcartDropdown=true;}else{showMiniShopCartDropDown("placeHolder","quick_cart_container","orderItemAdded");}};var hideSubscriptionPopup=serviceResponse.subscriptionFrequencyUpdated;if(categoryDisplayJS.allowAccessoryDialog&&hideSubscriptionPopup!="true"){wantShowMiniShopcartDropdown=false;var accessoryDialog=dijit.byId("category_accessory_popup");var dialogAlreadyOpened=accessoryDialog&&accessoryDialog!=null&&accessoryDialog.open;if(!dialogAlreadyOpened){dojo.xhrPost({url:getAbsoluteURL()+"AjaxWHRCatalogEntryAccessoryDialog",handleAs:"text",content:{storeId:ServicesDeclarationJS.storeId,catalogId:ServicesDeclarationJS.catalogId,langId:ServicesDeclarationJS.langId,orderId:serviceResponse.orderId[0],orderItemId:serviceResponse.orderItemId[0]},service:this,load:function(response,ioArgs){var mainDiv=dojo.byId("category_accessory_popup_main_div");if(dojo.byId("category_accessory_popup_main_div")==undefined){mainDiv=dojo.create("div",{id:"category_accessory_popup_main_div",innerHTML:response},dojo.body());}else{mainDiv.innerHTML=response;}if(dojo.query("#category_accessory_no_accessories",mainDiv).length==0){dojo.parser.parse(mainDiv);var dialog=dijit.byId("category_accessory_popup");dialog.show();categoryDisplayJS.setupAccessoriesPopup();dojo.connect(dialog,"hide",null,function(){dialog.destroyRecursive();});}else{showMiniShopCart();}},error:function(errObj,ioArgs){console.debug("An error occurred during accessory dialog xhrPost request: "+dojo.toJson(errObj));showMiniShopCart();}});}}else{showMiniShopCart();}},failureHandler:function(serviceResponse){if(categoryDisplayJS.allowAddToCartModal&&categoryDisplayJS.storeFlow=="GGW"&&!categoryDisplayJS.displayErrorMsg){MessageHelper.hideAndClearMessage();MessageHelper.hideAndClearMessageInCustomAreas("ErrorMessageText_ModalWin","MessageArea_ModalWin");if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",serviceResponse.errorMessageKey);}}}else{if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}}cursor_clear();}}),wc.service.declare({id:"AjaxAddOrderItem_shopCart",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_REMOVEITEM);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemForShippingBillingPage",actionId:"AjaxDeleteOrderItemForShippingBillingPage",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_REMOVEITEM);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemFromCart",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem1",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){if(!CheckoutHelperJS.pendingOrderDetailsPage){if(CheckoutHelperJS.shoppingCartPage){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;}else{document.location.href="OrderShippingBillingView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId;}}else{cursor_clear();}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItem",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){if(serviceResponse.LIMITED_QTY_AVAIL){MessageHelper.displayStatusMessage(MessageHelper.messages.LIMITED_QTY_AVAIL);}else{MessageHelper.hideAndClearMessage();}cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE_QTY_UPDATE);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderShippingInfo",actionId:"AjaxUpdateOrderShippingInfo",url:getAbsoluteURL()+"AjaxOrderChangeServiceShipInfoUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPrepareOrderForSubmit",actionId:"AjaxPrepareOrderForSubmit",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderPrepare",formId:"",successHandler:function(serviceResponse){var tempCurrentId=currentId;cursor_clear();setCurrentId(tempCurrentId);CheckoutHelperJS.setOrderPrepared("true");CheckoutHelperJS.checkoutOrder(CheckoutHelperJS.getSavedParameter("tempOrderId"),CheckoutHelperJS.getSavedParameter("tempPaymentType"),CheckoutHelperJS.getSavedParameter("tempUserType"),CheckoutHelperJS.getSavedParameter("tempEmailAddresses"),CheckoutHelperJS.getSavedParameter("tempIsQuote"));},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitOrder",actionId:"AjaxSubmitOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSubmit",formId:"",successHandler:function(serviceResponse){var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();document.location.href="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId+"&shipmentTypeId="+shipmentTypeId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitQuote",actionId:"AjaxSubmitQuote",url:getAbsoluteURL()+"AjaxSubmitQuote",formId:"",successHandler:function(serviceResponse){var redirectURL="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+CheckoutHelperJS.getOrderId()+"&shipmentTypeId="+CheckoutHelperJS.getShipmentTypeId()+"&isQuote=true&quoteId="+serviceResponse.outOrderId;if(serviceResponse.outExternalQuoteId!=undefined&&serviceResponse.outExternalQuoteId!=null){redirectURL+=redirectURL+"&externalQuoteId="+serviceResponse.outExternalQuoteId;}document.location.href=redirectURL;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddAddressForPerson",actionId:"AjaxAddAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){AddressHelper.setCommonParameters(langId,storeId,catalogId);AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateAddressForPerson",actionId:"AjaxUpdateAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressUpdate",formId:"",successHandler:function(serviceResponse){AddressHelper.setCommonParameters(langId,storeId,catalogId);AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderAfterAddressUpdate",actionId:"AjaxUpdateOrderAfterAddressUpdate",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();if(ServicesDeclarationJS.storeFlow=="ORN"||ServicesDeclarationJS.storeFlow=="GRN"){var userId=serviceResponse.userId;MiniWishListJS.saveGUIdToCookieForWL(userId);}else{MessageHelper.displayStatusMessage(MessageHelper.messages.WISHLIST_ADDED);if(categoryDisplayJS.currentPageType=="compare"){categoryDisplayJS.changeSaveToFavorites(serviceResponse.catEntryId);}}},failureHandler:function(serviceResponse){if(ServicesDeclarationJS.storeFlow=="ORN"||ServicesDeclarationJS.storeFlow=="GRN"){if(serviceResponse.errorMessage){showInterestItemAddError(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}}else{if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd_shopCart",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemDelete",actionId:"AjaxInterestItemDelete",url:getAbsoluteURL()+"AjaxInterestItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemListMessage",actionId:"AjaxInterestItemListMessage",url:getAbsoluteURL()+"AjaxInterestItemListMessage",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPromotionCodeManage",actionId:"AjaxPromotionCodeManage",url:getAbsoluteURL()+"AjaxPromotionCodeManage",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";wc.service.invoke("AjaxUpdateOrderItem",params);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCouponsAddRemove",actionId:"AjaxCouponsAddRemove",url:getAbsoluteURL()+"AjaxCouponsAddRemove",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=serviceResponse.orderId;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";wc.service.invoke("AjaxUpdateOrderItem",params);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AddBillingAddress",actionId:"AddBillingAddress",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"ScheduleOrder",actionId:"ScheduleOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSchedule",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var originalOrderId=document.getElementById("orderIdToSchedule").value;var newOrderId=serviceResponse.orderId;var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();var purchaseOrderNumber="";if(document.forms.purchaseOrderNumberInfo.purchase_order_number.value!=null){purchaseOrderNumber=document.forms.purchaseOrderNumberInfo.purchase_order_number.value;}var url="OrderProcessServiceOrderCancel?orderId="+originalOrderId+"&storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL=OrderShippingBillingConfirmationView%3ForderId%3D"+newOrderId+"%26originalOrderId%3D"+originalOrderId+"%26shipmentTypeId%3D"+shipmentTypeId+"%26purchaseOrderNumber%3D"+purchaseOrderNumber;document.location.href=url;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateRewardOption",actionId:"AjaxUpdateRewardOption",url:getAbsoluteURL()+"AjaxOrderChangeServiceRewardOptionUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCreate",actionId:"AjaxOrderCreate",url:getAbsoluteURL()+"AjaxOrderCreate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_CREATED);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CREATED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCancel",actionId:"AjaxSingleOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_CANCELLED);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCancel",actionId:"AjaxOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){savedOrdersJS.cancelSavedOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderSave",actionId:"AjaxSingleOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_SAVED);}else{MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_SAVED);}var inputElement=document.getElementById("OrderDescription_input");if(inputElement!=null&&inputElement!="undefined"){dojo.removeClass(inputElement,"savedOrderDetailsInputBorderWarning");dojo.addClass(inputElement,"savedOrderDetailsInputBorder");document.getElementById("OldOrderDescription").value=inputElement.value;}cursor_clear();if(savedOrdersJS.updateCartRequired){savedOrdersJS.updateCartRequired=false;CheckoutHelperJS.updateShoppingCart(document.ShopCartForm);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){if(serviceResponse.errorCode=="CMN1024E"&&serviceResponse.systemMessage!=""){MessageHelper.displayErrorMessage(serviceResponse.systemMessage);}else{if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_NOT_SAVED);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED);}}}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderSave",actionId:"AjaxOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){savedOrdersJS.saveOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSetPendingOrder",actionId:"AjaxSetPendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);savedOrdersJS.determinePageForward("AjaxSetPendingOrder");cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdatePendingOrder",actionId:"AjaxUpdatePendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){savedOrdersJS.determinePageForward("AjaxUpdatePendingOrder");cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCopy",actionId:"AjaxSingleOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxSingleOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCopy",actionId:"AjaxOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCalculate",actionId:"AjaxSingleOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_COPIED);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCurrentOrderCalculate",actionId:"AjaxCurrentOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCalculate",actionId:"AjaxOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();savedOrdersJS.copyOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){var sapUnavailablePopObj=dijit.byId("sap_unavailable_popup");if((serviceResponse.errorMessageKey=="_ERR_SAP_APPLICATION_EXCEPTION"||serviceResponse.errorMessageKey=="ORD_WHR_SAP_DOWN_MSG"||serviceResponse.errorMessageKey=="ERROR_SAP_SYS_NAVL_FOR_ORDER_STATUS")&&sapUnavailablePopObj!=undefined){sapUnavailablePopObj.show();}else{if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"migrateUnregisteredUserWL",actionId:"migrateUnregisteredUserWL",url:getAbsoluteURL()+"AjaxMigrateUnregisterWishList",formId:"",successHandler:function(serviceResponse){var userId=serviceResponse.userId;var updateCookie=serviceResponse.updateCookie;if(updateCookie=="true"){categoryDisplayJS.setCookieByName("unRegWishListClientId",userId,3);}},failureHandler:function(serviceResponse){return false;}});wc.service.declare({id:"pdpCheckDeliveryApptDates",actionId:"pdpCheckDeliveryApptDates",url:getAbsoluteURL()+"WHRCheckDeliveryApptDatesView",formId:"",successHandler:function(data){$("#invalidcorderrormsg").removeClass("active");enabledDays=data;console.log(data);var regDate="^(0[1-9]{1}|1[0-2]{1}){1}-(0[1-9]|(1|2)[0-9]|3[0-1]){1}-(19[0-9]{2}|2[0-9]{3})$";if(data[0].match(regDate)){$slider=$("#ars-slider");$slider.children("div").animate({right:"100%"},300);displayCalenday($("#delivery-dates"));$("#location #cal-loading").fadeOut();}else{$("#location #cal-loading").fadeOut();if(data[0]=="_ERR_SYSTEM_UNAVAILABLE"){$("#invalidcorderrormsg").text(MessageHelper.messages.PDP_NETWORK_ERROR_MESSAGE);$("#invalidcorderrormsg").addClass("active");}else{if(data[0]=="_ERROR_PDP_CAL_JURISDICTION_CODE_DETERMINATION_FAILED"){$("#invalidcorderrormsg").text(MessageHelper.messages.PDP_JURISDICTION_ERROR_MESSAGE);$("#invalidcorderrormsg").addClass("active");}}}},failureHandler:function(serviceResponse){$("#location #cal-loading").fadeOut();$("#invalidcorderrormsg").text(MessageHelper.messages.PDP_NETWORK_ERROR_MESSAGE);$("#invalidcorderrormsg").addClass("active");return false;}});