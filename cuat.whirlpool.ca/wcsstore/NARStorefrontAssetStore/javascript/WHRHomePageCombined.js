if(typeof(MessageHelper)=="undefined"||!MessageHelper||!MessageHelper.topicNamespace){MessageHelper={messages:{},identifier:"",alternateErrorTextId:null,alternateMessageTextId:null,getCurrentYear:function(){return new Date().getFullYear();},getCurrentMonth:function(){return new Date().getMonth()+1;},getCurrentDay:function(){return new Date().getDate();},getRenderContextProperty:function(context,propertyName){console.debug("enter getRenderContextProperty with propertyName = "+propertyName);if(context==null){console.debug("context is null. Return null...");return null;}var result=context.properties[propertyName];console.debug("the found property value is: "+result);return result;},setMessage:function(key,msg){this.messages[key]=msg;},displayErrorMessage:function(msg){if(this.messages.ERROR_MESSAGE_TYPE!=null&&this.messages.ERROR_MESSAGE_TYPE!="undefined"){var MsgType=this.messages.ERROR_MESSAGE_TYPE;msg=MsgType+msg;}var duplicateErrorMsg=true;var duplicateMessageArea=true;if(MessageHelper.alternateErrorTextId==null||dojo.trim(MessageHelper.alternateErrorTextId)==""||!dojo.byId(MessageHelper.alternateErrorTextId)){MessageHelper.alternateErrorTextId="ErrorMessageText";duplicateErrorMsg=false;}if(MessageHelper.alternateMessageTextId==null||dojo.trim(MessageHelper.alternateMessageTextId)==""||!dojo.byId(MessageHelper.alternateMessageTextId)){MessageHelper.alternateMessageTextId="MessageArea";duplicateMessageArea=false;}dojo.byId(MessageHelper.alternateErrorTextId).className="error_msg";dojo.byId(MessageHelper.alternateErrorTextId).innerHTML=msg;if(duplicateErrorMsg){dojo.byId("ErrorMessageText").className="status_msg";dojo.byId("ErrorMessageText").innerHTML=msg;}dojo.byId(MessageHelper.alternateMessageTextId).style.display="block";dojo.byId(MessageHelper.alternateMessageTextId).focus();if(duplicateMessageArea){dojo.byId("MessageArea").style.display="block";}setTimeout("dojo.byId('"+MessageHelper.alternateErrorTextId+"').focus()",2000);},displayStatusMessage:function(msg){var duplicateErrorMsg=true;var duplicateMessageArea=true;if(MessageHelper.alternateErrorTextId==null||dojo.trim(MessageHelper.alternateErrorTextId)==""||!dojo.byId(MessageHelper.alternateErrorTextId)){MessageHelper.alternateErrorTextId="ErrorMessageText";duplicateErrorMsg=false;}if(MessageHelper.alternateMessageTextId==null||dojo.trim(MessageHelper.alternateMessageTextId)==""||!dojo.byId(MessageHelper.alternateMessageTextId)){MessageHelper.alternateMessageTextId="MessageArea";duplicateMessageArea=false;}dojo.byId(MessageHelper.alternateErrorTextId).className="status_msg";dojo.byId(MessageHelper.alternateErrorTextId).innerHTML=msg;if(duplicateErrorMsg){dojo.byId("ErrorMessageText").className="status_msg";dojo.byId("ErrorMessageText").innerHTML=msg;}dojo.byId(MessageHelper.alternateMessageTextId).style.display="block";dojo.byId(MessageHelper.alternateMessageTextId).focus();if(duplicateMessageArea){dojo.byId("MessageArea").style.display="block";}setTimeout("dojo.byId('"+MessageHelper.alternateErrorTextId+"').focus()",2000);},hideAndClearMessage:function(){if(dojo.byId("ErrorMessageText")!=null&&dojo.byId("ErrorMessageText")!="undefined"){dojo.byId("ErrorMessageText").innerHTML="";}if(dojo.byId("MessageArea")!=null&&dojo.byId("MessageArea")!="undefined"){dojo.byId("MessageArea").style.display="none";}},hideAndClearMessageInCustomAreas:function(errorMessageTextId,messageAreaId){if(dojo.byId(errorMessageTextId)!=null&&dojo.byId(errorMessageTextId)!="undefined"){dojo.byId(errorMessageTextId).innerHTML="";}if(dojo.byId(messageAreaId)!=null&&dojo.byId(messageAreaId)!="undefined"){dojo.byId(messageAreaId).style.display="none";}},displayErrorMessageInCustomLocation:function(errorMessageTextId,messageAreaId,msg){if(this.messages.ERROR_MESSAGE_TYPE!=null&&this.messages.ERROR_MESSAGE_TYPE!="undefined"){var MsgType=this.messages.ERROR_MESSAGE_TYPE;msg=MsgType+msg;}dojo.byId(errorMessageTextId).className="error_msg";dojo.byId(errorMessageTextId).innerHTML=msg;dojo.byId(errorMessageTextId).style.display="block";dojo.byId(messageAreaId).style.display="block";},displayStatusMessageInCustomLocation:function(statusMessageTextId,messageAreaId,msg){dojo.byId(statusMessageTextId).className="status_msg";dojo.byId(statusMessageTextId).innerHTML=msg;dojo.byId(statusMessageTextId).style.display="block";dojo.byId(messageAreaId).style.display="block";},formErrorHandle:function(serviceResponse,formName){this.formErrorHandleClient(serviceResponse.errorMessageParam,serviceResponse.errorMessage);},formErrorHandleClient:function(id,errorMessage){var element=dojo.byId(id);if(errorMessage==null){console.debug("formErrorHandleClient: The error message is null.");return;}if(element){if(this.identifier!=(id+"_tooltip")){this.identifier=id+"_tooltip";var node=document.createElement("span");var imgDirPath=getImageDirectoryPath();if(dojo.isIE<7){node.innerHTML=errorMessage+"<iframe id='errorMessageIFrame' scrolling='no' frameborder='0' src='"+imgDirPath+"images/empty.gif'></iframe>";}else{node.innerHTML=errorMessage;}var tooltip=new dijit.Tooltip({connectId:[id]},node);tooltip.startup();console.log("created",tooltip,tooltip.id);element.focus();tooltip.open(element);dojo.connect(element,"onblur",tooltip,"close");dojo.connect(element,"onblur",tooltip,"destroy");dojo.connect(element,"onblur",this,"clearCurrentIdentifier");tooltip._onMouseOver=this.emptyFunc;}}},clearCurrentIdentifier:function(){this.identifier="";},emptyFunc:function(event){},containsDoubleByte:function(target){var str=new String(target);var oneByteMax=127;for(var i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){return true;}}return false;},isValidEmail:function(strEmail){if(this.containsDoubleByte(strEmail)){return false;}if(strEmail.length==0){return true;}else{if(strEmail.length<5){return false;}else{if(strEmail.indexOf(" ")>0){return false;}else{if(strEmail.indexOf("@")<1){return false;}else{if(strEmail.lastIndexOf(".")<(strEmail.indexOf("@")+2)){return false;}else{if(strEmail.lastIndexOf(".")>=strEmail.length-2){return false;}}}}}}var pattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if(pattern.test(strEmail)){return true;}else{return false;}},isValidUTF8length:function(UTF16String,maxlength){if(this.utf8StringByteLength(UTF16String)>maxlength){return false;}else{return true;}},utf8StringByteLength:function(UTF16String){if(UTF16String===null){return 0;}var str=String(UTF16String);var oneByteMax=127;var twoByteMax=2047;var byteSize=str.length;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){byteSize=byteSize+1;}if(chr>twoByteMax){byteSize=byteSize+1;}}return byteSize;},IsNumeric:function(text,allowDot){if(allowDot){var ValidChars="0123456789.";}else{var ValidChars="0123456789";}var IsNumber=true;var Char;for(i=0;i<text.length&&IsNumber==true;i++){Char=text.charAt(i);if(ValidChars.indexOf(Char)==-1){IsNumber=false;}}return IsNumber;},IsValidPhone:function(text){var ValidChars="0123456789()-+ ";var IsValid=true;var Char;for(i=0;i<text.length&&IsValid==true;i++){Char=text.charAt(i);if(ValidChars.indexOf(Char)==-1){IsValid=false;}}return IsValid;},iframeFormErrorHandleClient:function(iframeId,id,errorMessage){var oIframe=document.getElementById(iframeId);var y=(oIframe.contentWindow||oIframe.contentDocument);if(y.document){y=y.document;}var element=y.getElementById(id);if(errorMessage==null){console.debug("formErrorHandleClient: The error message is null.");return;}if(element){if(this.identifier!=(id+"_tooltip")){this.identifier=id+"_tooltip";var node=y.createElement("span");var imgDirPath=getImageDirectoryPath();if(dojo.isIE<7){node.innerHTML=errorMessage+"<iframe id='errorMessageIFrame' scrolling='no' frameborder='0' src='"+imgDirPath+"images/empty.gif'></iframe>";}else{node.innerHTML=errorMessage;}var iFrameCoords=dojo.coords(dojo.byId(iframeId));var elementCoords=dojo.coords(element);var viewportCoords=dijit.getViewport();var dummyDivId=id+"_dummyDiv";var dummyDiv=dojo.create("div",{id:dummyDivId,style:{position:"absolute",visibility:"hidden",left:(viewportCoords.l+iFrameCoords.x+elementCoords.l)+"px",top:(viewportCoords.t+iFrameCoords.y+elementCoords.t)+"px",width:elementCoords.w+"px",height:elementCoords.h+"px","background-color":"black"}},dojo.body());var tooltip=new dijit.Tooltip({connectId:[dummyDivId]},node);tooltip.startup();console.log("created",tooltip,tooltip.id);element.focus();tooltip.open(dummyDiv);dojo.connect(element,"onblur",tooltip,"close");dojo.connect(element,"onblur",tooltip,"destroy");dojo.connect(element,"onblur",this,"clearCurrentIdentifier");var dummyDivRemoveFnHandle=dojo.connect(element,"onblur",this,function(){dojo.disconnect(dummyDivRemoveFnHandle);dojo.destroy(dummyDivId);});tooltip._onMouseOver=this.emptyFunc;}}},displayErrorMsg:function(form,id,message){var form=document.getElementById(form);this.formErrorHandleClient(form[""+id].id,this.messages[message]);document.getElementById(form[""+id].id).style.background="#ff0000";}};}dojo.require("wc.service.common");ServicesDeclarationJS={langId:"-1",storeId:"",catalogId:"",storeFlow:"",setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;},setStoreFlow:function(storeFlow){this.storeFlow=storeFlow;}};wc.service.declare({id:"AjaxInterestItemAddAndDeleteFromCart",actionId:"AjaxInterestItemAddAndDeleteFromCart",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();requestSubmitted=false;CheckoutHelperJS.deleteFromCart(serviceResponse.orderItemId,true);MessageHelper.displayStatusMessage(MessageHelper.messages.WISHLIST_ADDED);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddOrderItem",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){if(ServicesDeclarationJS.storeFlow=="GGW"){categoryDisplayJS.allowAccessoryDialog=false;}if(categoryDisplayJS.allowAddToCartModal&&document.getElementById("showAddToCartModal").value=="true"){MessageHelper.hideAndClearMessage();MessageHelper.hideAndClearMessageInCustomAreas("ErrorMessageText_ModalWin","MessageArea_ModalWin");MessageHelper.displayStatusMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",MessageHelper.messages.SHOPCART_ADDED);}else{if(ServicesDeclarationJS.storeFlow=="GGW"&&serviceResponse.successWarning=="true"){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.WARNING_BUNDLE_ITEMS_UNAVAIL_IN_SAP);}else{MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_ADDED);}}cursor_clear();if(categoryDisplayJS){var attributes=document.getElementsByName("attrValue");var singleSKU=true;for(var i=0;i<attributes.length;i++){if(attributes[i].options.length>1){singleSKU=false;}}if(!singleSKU){categoryDisplayJS.selectedAttributes=[];for(var i=0;i<attributes.length;i++){if(attributes[i]!=null){attributes[i].value="";}}}}if(typeof(ShipmodeSelectionExtJS)!=null&&typeof(ShipmodeSelectionExtJS)!="undefined"){ShipmodeSelectionExtJS.setOrderItemId(serviceResponse.orderItemId[0]);}if(categoryDisplayJS.allowAddToCartModal&&document.getElementById("showAddToCartModal").value=="true"){categoryDisplayJS.allowAccessoryDialog=false;document.getElementById("isModalOpen").value="true";var itemAddedfromModal=document.getElementById("itemAddedFromModal").value;if(itemAddedfromModal==""||itemAddedfromModal==null||itemAddedfromModal==undefined){showAddToCartModal();}else{var modalElementId="btn_"+itemAddedfromModal;document.getElementById(modalElementId).innerHTML=document.getElementById("itemInCartMsg").value;document.getElementById(modalElementId).href="javascript:;";document.getElementById(modalElementId).className="content-btn add-to-cart-btn item-in-cart";document.getElementById("itemAddedFromModal").value="";}}miniShopcartRefreshPending=true;var showMiniShopCart=function(){if(miniShopcartRefreshPending){wantShowMiniShopcartDropdown=true;}else{showMiniShopCartDropDown("placeHolder","quick_cart_container","orderItemAdded");}};var hideSubscriptionPopup=serviceResponse.subscriptionFrequencyUpdated;if(categoryDisplayJS.allowAccessoryDialog&&hideSubscriptionPopup!="true"){wantShowMiniShopcartDropdown=false;var accessoryDialog=dijit.byId("category_accessory_popup");var dialogAlreadyOpened=accessoryDialog&&accessoryDialog!=null&&accessoryDialog.open;if(!dialogAlreadyOpened){dojo.xhrPost({url:getAbsoluteURL()+"AjaxWHRCatalogEntryAccessoryDialog",handleAs:"text",content:{storeId:ServicesDeclarationJS.storeId,catalogId:ServicesDeclarationJS.catalogId,langId:ServicesDeclarationJS.langId,orderId:serviceResponse.orderId[0],orderItemId:serviceResponse.orderItemId[0]},service:this,load:function(response,ioArgs){var mainDiv=dojo.byId("category_accessory_popup_main_div");if(dojo.byId("category_accessory_popup_main_div")==undefined){mainDiv=dojo.create("div",{id:"category_accessory_popup_main_div",innerHTML:response},dojo.body());}else{mainDiv.innerHTML=response;}if(dojo.query("#category_accessory_no_accessories",mainDiv).length==0){dojo.parser.parse(mainDiv);var dialog=dijit.byId("category_accessory_popup");dialog.show();categoryDisplayJS.setupAccessoriesPopup();dojo.connect(dialog,"hide",null,function(){dialog.destroyRecursive();});}else{showMiniShopCart();}},error:function(errObj,ioArgs){console.debug("An error occurred during accessory dialog xhrPost request: "+dojo.toJson(errObj));showMiniShopCart();}});}}else{showMiniShopCart();}},failureHandler:function(serviceResponse){if(categoryDisplayJS.allowAddToCartModal&&document.getElementById("isModalOpen").value=="true"){MessageHelper.hideAndClearMessage();MessageHelper.hideAndClearMessageInCustomAreas("ErrorMessageText_ModalWin","MessageArea_ModalWin");if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessageInCustomLocation("ErrorMessageText_ModalWin","MessageArea_ModalWin",serviceResponse.errorMessageKey);}}}else{if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}}cursor_clear();}}),wc.service.declare({id:"AjaxAddOrderItem_shopCart",actionId:"AjaxAddOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_NO_ELIGIBLE_TRADING"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_CONTRACT_EXPIRED_GOTO_ORDER);}else{if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_REMOVEITEM);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemForShippingBillingPage",actionId:"AjaxDeleteOrderItemForShippingBillingPage",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.SHOPCART_REMOVEITEM);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItemFromCart",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxDeleteOrderItem1",actionId:"AjaxDeleteOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){if(!CheckoutHelperJS.pendingOrderDetailsPage){if(CheckoutHelperJS.shoppingCartPage){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;}else{document.location.href="OrderShippingBillingView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId;}}else{cursor_clear();}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderItem",actionId:"AjaxUpdateOrderItem",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){if(serviceResponse.LIMITED_QTY_AVAIL){MessageHelper.displayStatusMessage(MessageHelper.messages.LIMITED_QTY_AVAIL);}else{MessageHelper.hideAndClearMessage();}cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorMessageKey=="_ERR_RETRIEVE_PRICE"){MessageHelper.displayErrorMessage(MessageHelper.messages.ERROR_RETRIEVE_PRICE_QTY_UPDATE);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderShippingInfo",actionId:"AjaxUpdateOrderShippingInfo",url:getAbsoluteURL()+"AjaxOrderChangeServiceShipInfoUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitOrder",actionId:"AjaxSubmitOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSubmit",formId:"",successHandler:function(serviceResponse){var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();document.location.href="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+serviceResponse.orderId+"&shipmentTypeId="+shipmentTypeId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSubmitQuote",actionId:"AjaxSubmitQuote",url:getAbsoluteURL()+"AjaxSubmitQuote",formId:"",successHandler:function(serviceResponse){var redirectURL="OrderShippingBillingConfirmationView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&orderId="+CheckoutHelperJS.getOrderId()+"&shipmentTypeId="+CheckoutHelperJS.getShipmentTypeId()+"&isQuote=true&quoteId="+serviceResponse.outOrderId;if(serviceResponse.outExternalQuoteId!=undefined&&serviceResponse.outExternalQuoteId!=null){redirectURL+=redirectURL+"&externalQuoteId="+serviceResponse.outExternalQuoteId;}document.location.href=redirectURL;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxAddAddressForPerson",actionId:"AjaxAddAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){AddressHelper.setCommonParameters(langId,storeId,catalogId);AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateAddressForPerson",actionId:"AjaxUpdateAddressForPerson",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressUpdate",formId:"",successHandler:function(serviceResponse){AddressHelper.setCommonParameters(langId,storeId,catalogId);AddressHelper.updateOrderAfterAddressUpdate();MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateOrderAfterAddressUpdate",actionId:"AjaxUpdateOrderAfterAddressUpdate",url:getAbsoluteURL()+"AjaxOrderChangeServiceItemUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();if(ServicesDeclarationJS.storeFlow=="ORN"||ServicesDeclarationJS.storeFlow=="GRN"){var userId=serviceResponse.userId;MiniWishListJS.saveGUIdToCookieForWL(userId);}else{MessageHelper.displayStatusMessage(MessageHelper.messages.WISHLIST_ADDED);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){showInterestItemAddError(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){showInterestItemAddError(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemAdd_shopCart",actionId:"AjaxInterestItemAdd",url:getAbsoluteURL()+"AjaxInterestItemAdd",formId:"",successHandler:function(serviceResponse){document.location.href="AjaxOrderItemDisplayView?storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemDelete",actionId:"AjaxInterestItemDelete",url:getAbsoluteURL()+"AjaxInterestItemDelete",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxInterestItemListMessage",actionId:"AjaxInterestItemListMessage",url:getAbsoluteURL()+"AjaxInterestItemListMessage",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxPromotionCodeManage",actionId:"AjaxPromotionCodeManage",url:getAbsoluteURL()+"AjaxPromotionCodeManage",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";wc.service.invoke("AjaxUpdateOrderItem",params);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCouponsAddRemove",actionId:"AjaxCouponsAddRemove",url:getAbsoluteURL()+"AjaxCouponsAddRemove",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=serviceResponse.orderId;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";wc.service.invoke("AjaxUpdateOrderItem",params);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AddBillingAddress",actionId:"AddBillingAddress",url:getAbsoluteURL()+"AjaxPersonChangeServiceAddressAdd",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"ScheduleOrder",actionId:"ScheduleOrder",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderSchedule",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();var originalOrderId=document.getElementById("orderIdToSchedule").value;var newOrderId=serviceResponse.orderId;var shipmentTypeId=CheckoutHelperJS.getShipmentTypeId();var purchaseOrderNumber="";if(document.forms.purchaseOrderNumberInfo.purchase_order_number.value!=null){purchaseOrderNumber=document.forms.purchaseOrderNumberInfo.purchase_order_number.value;}var url="OrderProcessServiceOrderCancel?orderId="+originalOrderId+"&storeId="+ServicesDeclarationJS.storeId+"&catalogId="+ServicesDeclarationJS.catalogId+"&langId="+ServicesDeclarationJS.langId+"&URL=OrderShippingBillingConfirmationView%3ForderId%3D"+newOrderId+"%26originalOrderId%3D"+originalOrderId+"%26shipmentTypeId%3D"+shipmentTypeId+"%26purchaseOrderNumber%3D"+purchaseOrderNumber;document.location.href=url;},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdateRewardOption",actionId:"AjaxUpdateRewardOption",url:getAbsoluteURL()+"AjaxOrderChangeServiceRewardOptionUpdate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCreate",actionId:"AjaxOrderCreate",url:getAbsoluteURL()+"AjaxOrderCreate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_CREATED);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CREATED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCancel",actionId:"AjaxSingleOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_CANCELLED);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCancel",actionId:"AjaxOrderCancel",url:getAbsoluteURL()+"AjaxOrderProcessServiceOrderCancel",formId:"",successHandler:function(serviceResponse){savedOrdersJS.cancelSavedOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_CANCELLED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderSave",actionId:"AjaxSingleOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_SAVED);}else{MessageHelper.displayStatusMessage(MessageHelper.messages.ORDERS_SAVED);}var inputElement=document.getElementById("OrderDescription_input");if(inputElement!=null&&inputElement!="undefined"){dojo.removeClass(inputElement,"savedOrderDetailsInputBorderWarning");dojo.addClass(inputElement,"savedOrderDetailsInputBorder");document.getElementById("OldOrderDescription").value=inputElement.value;}cursor_clear();if(savedOrdersJS.updateCartRequired){savedOrdersJS.updateCartRequired=false;CheckoutHelperJS.updateShoppingCart(document.ShopCartForm);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){if(serviceResponse.errorCode=="CMN1024E"&&serviceResponse.systemMessage!=""){MessageHelper.displayErrorMessage(serviceResponse.systemMessage);}else{if(savedOrdersJS.isOrderDetailsPageValue){MessageHelper.displayStatusMessage(MessageHelper.messages.PENDING_ORDER_NOT_SAVED);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED);}}}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderSave",actionId:"AjaxOrderSave",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){savedOrdersJS.saveOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SAVED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSetPendingOrder",actionId:"AjaxSetPendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);savedOrdersJS.determinePageForward("AjaxSetPendingOrder");cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"||serviceResponse.errorCode=="CMN1024E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxUpdatePendingOrder",actionId:"AjaxUpdatePendingOrder",url:getAbsoluteURL()+"AjaxSetPendingOrder",formId:"",successHandler:function(serviceResponse){savedOrdersJS.determinePageForward("AjaxUpdatePendingOrder");cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_SET_CURRENT);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCopy",actionId:"AjaxSingleOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxSingleOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCopy",actionId:"AjaxOrderCopy",url:getAbsoluteURL()+"AjaxOrderCopy",formId:"",successHandler:function(serviceResponse){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.URL="";params.updatePrices="1";params.orderId=serviceResponse.orderId;params.calculationUsageId="-1";wc.service.invoke("AjaxOrderCalculate",params);MessageHelper.hideAndClearMessage();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxSingleOrderCalculate",actionId:"AjaxSingleOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_COPIED);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxCurrentOrderCalculate",actionId:"AjaxCurrentOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();MessageHelper.displayStatusMessage(MessageHelper.messages.ORDER_SET_CURRENT);cursor_clear();},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"AjaxOrderCalculate",actionId:"AjaxOrderCalculate",url:getAbsoluteURL()+"AjaxOrderCalculate",formId:"",successHandler:function(serviceResponse){MessageHelper.hideAndClearMessage();savedOrdersJS.copyOrder(false);},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){if(serviceResponse.errorCode=="CMN0409E"){MessageHelper.displayErrorMessage(MessageHelper.messages.ORDER_NOT_COPIED);}else{MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}}),wc.service.declare({id:"migrateUnregisteredUserWL",actionId:"migrateUnregisteredUserWL",url:getAbsoluteURL()+"AjaxMigrateUnregisterWishList",formId:"",successHandler:function(serviceResponse){var userId=serviceResponse.userId;var updateCookie=serviceResponse.updateCookie;if(updateCookie=="true"){categoryDisplayJS.setCookieByName("unRegWishListClientId",userId,3);}},failureHandler:function(serviceResponse){return false;}});wc.service.declare({id:"AjaxBundlePriceCalculate",actionId:"AjaxBundlePriceCalculate",url:getAbsoluteURL()+"AjaxBundlePriceCalculate",formId:"",successHandler:function(serviceResponse){if(serviceResponse.bundleListPrice!=undefined){document.getElementById("compare-price").innerHTML=serviceResponse.bundleListPrice;document.getElementById("savings-price").innerHTML=serviceResponse.bundleSavings;if(categoryDisplayJS.storeFlow!="GGW"){document.getElementById("promotion-price").innerHTML=serviceResponse.bundleSavings;}}document.getElementById("sale-price-prodprice").innerHTML=serviceResponse.bundleOfferPrice;if(categoryDisplayJS.storeFlow=="GGW"&&serviceResponse.totalCount!=undefined){document.getElementById("bundle_item_count").innerHTML=serviceResponse.totalCount;$("div.clicked").fadeIn().delay(3000).fadeOut().removeClass("clicked");}cursor_clear();},failureHandler:function(serviceResponse){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);cursor_clear();return false;}});categoryDisplayJS={entitledItems:[],selectedProducts:new Object(),selectedAttributes:new Object(),errorMessages:new Object(),langId:"-1",storeId:"",catalogId:"",orderId:"",ajaxShopCart:true,ajaxMyAccount:true,contextChanged:false,isHistory:false,merchandisingAssociationItems:[],baseCatalogEntryDetails:[],associationThumbnailIndex:1,totalAssociationCount:0,baseItemAddedToCart:false,merchandisingProductAssociationAddToCart:false,merchandisingProductAssociationForm:"",isParentBundleBean:false,userType:"",allowAccessoryDialog:false,allowAddToCartModal:false,allowZipCodeDialog:false,moreInfoUrl:"",displayPrevAssociation:"",displayNextAssociation:"",defaultItemArray:[],currentPageType:"",currentCatalogEntryId:"",entitledItemJsonObject:null,entitledItemEspotJsonObject:null,quickviewItemId:null,quickviewPairedItemId:null,storeFlow:"",replacementProgramType:"",replacementProgramFrequency:"",setReplacementProgramType:function(replacementProgramType){this.replacementProgramType=replacementProgramType;},getReplacementProgramType:function(){return this.replacementProgramType;},setReplacementProgramFrequency:function(replacementProgramFrequency){this.replacementProgramFrequency=replacementProgramFrequency;},getReplacementProgramFrequency:function(){return this.replacementProgramFrequency;},trackDCSAddToCartClick:function(partNumber,category){var dcsuri="on_release_product_details_add_to_cart_"+partNumber;var ti="on_release_product_details_add_to_cart_"+partNumber;var cg_n="add_to_cart";if(this.getReplacementProgramType()!=""){if(this.getReplacementProgramType()=="oneTime"){dcsuri="on_release_product_details_add_to_cart_one_time_purchase";ti="on_release_product_details_add_to_cart_one_time_purchase_"+category;}else{if(this.getReplacementProgramType()=="frequently"){dcsuri="on_release_product_details_add_to_cart_replacement_program_"+this.getReplacementProgramFrequency()+"months";ti="on_release_product_details_add_to_cart_replacement_program_"+this.getReplacementProgramFrequency()+"months_"+category;}}}},setStoreFlow:function(storeFlow){this.storeFlow=storeFlow;},setAllowAccessoryDialog:function(allowAccessoryDialog){this.allowAccessoryDialog=allowAccessoryDialog;},setAllowAddToCartModal:function(allowAddToCartModal){this.allowAddToCartModal=allowAddToCartModal;},setPriceFunction:function(colorcheck,catalogEntryID){var jsondata=document.getElementById("entitledItem_"+catalogEntryID).innerHTML;var objectArray=dojo.fromJson(jsondata);var entries=objectArray;for(var i=0;i<entries.length;i++){if(colorcheck==entries[i].Attributes1){tempPrice=entries[i].Price1;break;}}document.getElementById("MyParagraphTag").innerHTML=tempPrice;},initHistory:function(elementId,changeUrl){var historyObject=new categoryDisplayJS.HistoryTracker(elementId,changeUrl);dojo.back.setInitialState(historyObject);},setAjaxShopCart:function(ajaxShopCart){this.ajaxShopCart=ajaxShopCart;},setAjaxMyAccount:function(ajaxMyAccount){this.ajaxMyAccount=ajaxMyAccount;},setCommonParameters:function(langId,storeId,catalogId,userType){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;this.userType=userType;},setEntitledItems:function(entitledItemArray){this.entitledItems=entitledItemArray;},setSelectedAttribute:function(selectedAttributeName,selectedAttributeValue){console.debug(selectedAttributeName+" : "+selectedAttributeValue);this.selectedAttributes[selectedAttributeName]=selectedAttributeValue;this.moreInfoUrl=this.moreInfoUrl+"&"+selectedAttributeName+"="+selectedAttributeValue;},setSelectedAttributeOfProduct:function(productId,selectedAttributeName,selectedAttributeValue){selectedAttributesForProduct=new Object();if(this.selectedProducts[productId]){selectedAttributesForProduct=this.selectedProducts[productId];}selectedAttributesForProduct[selectedAttributeName]=selectedAttributeValue;this.selectedProducts[productId]=selectedAttributesForProduct;},gotoASubCategoryDisplayPage:function(pageNum,totalPages,pageSize,subCatDispUrl){pageNum=trim(pageNum);if(pageNum==""){MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages.ERROR_EMPTY_NUM);return;}if(MessageHelper.IsNumeric(pageNum,false)==false){MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages.ERROR_PAGE_NUM);return;}if(pageNum>=1&&pageNum<=totalPages){MessageHelper.hideAndClearMessage();var url=subCatDispUrl+"&beginIndex="+((pageNum-1)*pageSize);this.loadSubCategoryContentURL(url);}else{MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages.ERROR_PAGE_NUM);return;}},getCatalogEntryId:function(){var attributeArray=[];for(attribute in this.selectedAttributes){attributeArray.push(attribute+"_"+this.selectedAttributes[attribute]);}return this.resolveSKU(attributeArray);},getCatalogEntryIdforProduct:function(selectedAttributes){var attributeArray=[];for(attribute in selectedAttributes){attributeArray.push(attribute+"_"+selectedAttributes[attribute]);}return this.resolveSKU(attributeArray);},resolveSKU:function(attributeArray){console.debug("Resolving SKU >> "+attributeArray+">>"+this.entitledItems);var catentry_id="";var attributeArrayCount=attributeArray.length;for(x in this.entitledItems){var catentry_id=this.entitledItems[x].catentry_id;var Attributes=this.entitledItems[x].Attributes;var attributeCount=0;for(index in Attributes){attributeCount++;}if(attributeArrayCount==0&&attributeCount==0){return catentry_id;}if(attributeCount!=0&&attributeArrayCount>=attributeCount){var matchedAttributeCount=0;for(attributeName in attributeArray){var attributeValue=attributeArray[attributeName];var tempAttributeValue=attributeValue.replace(/&#039;/g,"'");var tempAttributeValue=tempAttributeValue.replace(/\&/g,"&amp;");if(tempAttributeValue in Attributes){matchedAttributeCount++;}}if(attributeCount==matchedAttributeCount){console.debug("CatEntryId:"+catentry_id+" for Attribute: "+attributeArray);return catentry_id;}}}return null;},updateParamObject:function(params,key,value,toArray,index){if(params==null){params=[];}if(params[key]!=null&&toArray){if(dojo.lang.isArrayLike(params[key])){if(index!=null&&index!=""){params[key][index]=value;}else{params[key].push(value);}}else{var tmpValue=params[key];params[key]=[];params[key].push(tmpValue);params[key].push(value);}}else{if(index!=null&&index!=""&&index!=-1){params[key+"_"+index]=value;}else{if(index==-1){var i=1;while(params[key+"_"+i]!=null){i++;}params[key+"_"+i]=value;}else{params[key]=value;}}}return params;},setDefaultItem:function(productId,entitledItemId){this.defaultItemArray[productId]=entitledItemId;},getDefaultItem:function(productId){return this.defaultItemArray[productId];},AddBundle2ShopCartAjax:function(form){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";MessageHelper.hideAndClearMessage();params.zipCode=this.getCurrentUserZipCode();if(params.zipCode==null){if(this.allowZipCodeDialog){var zipCodePopup=dijit.byId("zip_code_popup");zipCodePopup.show();var args=arguments;var handle=dojo.connect(zipCodePopup,"onZipCodeSelected",null,dojo.hitch(this,function(){this.AddBundle2ShopCartAjax.apply(this,args);}));var handle2=dojo.connect(zipCodePopup,"hide",null,function(){dojo.disconnect(handle);dojo.disconnect(handle2);});return;}}var productCount=form.numberOfProduct.value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0||!isNonNegativeInteger(qty)){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);this.baseItemAddedToCart=true;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId_"+catEntryId);if(contractIdElements!=null&&contractIdElements!="undefined"){for(j=0;j<contractIdElements.length;j++){if(contractIdElements[j].checked){form["contractId_"+i].value=contractIdElements[j].value;break;}}}var contractId=form["contractId_"+i].value;if(contractId!=null&&contractId!=""){this.updateParamObject(params,"contractId",contractId,false,-1);}}params.productType=form.productType.value;if(categoryDisplayJS.storeFlow=="GGW"){params.bundleId=dojo.byId("bundleId").value;}if(!submitRequest()){return;}categoryDisplayJS.allowAccessoryDialog=false;cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);},CalculateBundlePrice:function(form,elementId){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;MessageHelper.hideAndClearMessage();var productCount=form.numberOfProduct.value;params.productCount=productCount;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0||!isNonNegativeInteger(qty)){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}if(!submitRequest()){return;}cursor_wait();if(categoryDisplayJS.storeFlow=="GGW"){$("#Message_"+elementId).addClass("clicked");}wc.service.invoke("AjaxBundlePriceCalculate",params);},BundlePriceCalculate:function(form,elementId){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;MessageHelper.hideAndClearMessage();var updateQuantity=false;var productCount=form.numberOfProduct.value;params.productCount=productCount;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var previousQty=form["previous_quantity_"+catEntryId].value;var currentQuantity=form["quantity_"+catEntryId].value;if(currentQuantity==null||currentQuantity==""||currentQuantity<=0||!isNonNegativeInteger(currentQuantity)){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}if(currentQuantity!=null&&currentQuantity!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",currentQuantity,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}if(previousQty==currentQuantity){continue;}else{document.getElementById("previous_quantity_"+catEntryId).value=currentQuantity;updateQuantity=true;}}if(updateQuantity==true){if(!submitRequest()){return;}cursor_wait();if(categoryDisplayJS.storeFlow=="GGW"){$("#Message_"+elementId).addClass("clicked");}wc.service.invoke("AjaxBundlePriceCalculate",params);}else{return;}},AddBundle2ShopCart:function(form){form.URL.value="AjaxOrderItemDisplayView";var productCount=form.numberOfProduct.value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);if(catEntryId!=null){form["catEntryId_"+i].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}var contractIdElements=document.getElementsByName("contractSelectForm_contractId_"+catEntryId);if(contractIdElements!=null&&contractIdElements!="undefined"){for(j=0;j<contractIdElements.length;j++){if(contractIdElements[j].checked){form["contractId_"+i].value=contractIdElements[j].value;break;}}}}if(!submitRequest()){return;}form.submit();},Add2ShopCart:function(entitledItemId,form,quantity,isPopup){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){if(this.merchandisingProductAssociationAddToCart){this.AddAssociation2ShopCart(catalogEntryId,quantity);return;}form.catEntryId.value=catalogEntryId;form.productId.value=catalogEntryId;this.AddItem2ShopCart(form,quantity);if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}}else{if(isPopup==true){if(dijit.byId("second_level_category_popup")!=null){dojo.byId("second_level_category_popup").style.zIndex="1";}MessageHelper.formErrorHandleClient("addToCartLink",MessageHelper.messages.ERR_RESOLVING_SKU);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);}}},AddItem2ShopCart:function(form,quantity){if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}form.quantity.value=quantity;var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){form.contractId.value=contractIdElements[i].value;break;}}}if(!submitRequest()){return;}form.submit();},ColorSwatchCatentryAdd2CartChange:function(entitledItemId){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();document.getElementById("catEntryId_1").value=catalogEntryId;},Add2ShopCartAjax:function(entitledItemId,quantity,isPopup){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){this.AddItem2ShopCartAjax(catalogEntryId,quantity);this.baseItemAddedToCart=true;if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}}else{if(isPopup==true){if(dijit.byId("second_level_category_popup")!=null){dojo.byId("second_level_category_popup").style.zIndex="1";}MessageHelper.formErrorHandleClient("addToCartLinkAjax",MessageHelper.messages.ERR_RESOLVING_SKU);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);this.baseItemAddedToCart=false;}}},setEntitledItemJsonObject:function(jsonObject){this.entitledItemJsonObject=jsonObject;},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject;},ReplaceItemAjax:function(entitledItemId,quantity){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();var removeOrderItemId="";var removeOrderItemId=replaceOrderItemId;var typeId=document.getElementById("shipmentTypeId");var addressId="";var shipModeId="";if(typeId!=null&&typeId!=""){if(typeId.value=="2"){addressId=document.getElementById("MS_ShipmentAddress_"+removeOrderItemId).value;shipModeId=document.getElementById("MS_ShippingMode_"+removeOrderItemId).value;}else{addressId=document.getElementById("addressId_all").value;shipModeId=document.getElementById("shipModeId_all").value;}}if(catalogEntryId!=null){if(removeOrderItemId==""){}else{this.ReplaceItemAjaxHelper(catalogEntryId,quantity,removeOrderItemId,addressId,shipModeId);}}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);}},ReplaceItemNonAjax:function(entitledItemId,quantity,form){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();var removeOrderItemId="";var removeOrderItemId=replaceOrderItemId;if(catalogEntryId!=null){if(removeOrderItemId==""){}else{form.orderItemId.value=removeOrderItemId;var addressId,shipModeId;if(quantity==0){console.debug("An invalid quantity was selected");}if(form.shipmentTypeId!=null&&form.shipmenTypeId!=""){if(form.shipmentTypeId.value=="2"){addressId=document.getElementById("MS_ShipmentAddress_"+removeOrderItemId).value;shipModeId=document.getElementById("MS_ShippingMode_"+removeOrderItemId).value;}else{addressId=document.getElementById("addressId_all").value;shipModeId=document.getElementById("shipModeId_all").value;}form.URL.value="OrderChangeServiceItemAdd?calculationUsage=-1,-2,-3,-4,-5,-6,-7&catEntryId="+catalogEntryId+"&quantity="+quantity+"&addressId="+addressId+"&shipModeId="+shipModeId+"&URL=OrderChangeServiceShipInfoUpdate?URL="+form.URL.value;}else{form.URL.value="OrderChangeServiceItemAdd?calculationUsage=-1,-2,-3,-4,-5,-6,-7&catEntryId="+catalogEntryId+"&quantity="+quantity+"&URL="+form.URL.value;}if(!submitRequest()){return;}form.submit();}}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);}},AddItem2ShopCartAjax:function(catEntryIdentifier,quantity){MessageHelper.hideAndClearMessage();if(!isPositiveInteger(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.catEntryId=catEntryIdentifier;params.quantity=quantity;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}params.zipCode=this.getCurrentUserZipCode();if(params.zipCode==null){if(this.allowZipCodeDialog){var zipCodePopup=dijit.byId("zip_code_popup");zipCodePopup.show();var args=arguments;var handle=dojo.connect(zipCodePopup,"onZipCodeSelected",null,dojo.hitch(this,function(){this.AddItem2ShopCartAjax.apply(this,args);}));var handle2=dojo.connect(zipCodePopup,"hide",null,function(){dojo.disconnect(handle);dojo.disconnect(handle2);});return;}}if(!submitRequest()){return;}if(typeof gtmHelper!="undefined"){gtmHelper.sendAddToCart(catEntryIdentifier,quantity);}cursor_wait();if(this.ajaxShopCart){wc.service.invoke("AjaxAddOrderItem",params);this.baseItemAddedToCart=true;}else{wc.service.invoke("AjaxAddOrderItem_shopCart",params);this.baseItemAddedToCart=true;}if(document.getElementById("shoppingCartBar")){document.getElementById("shoppingCartBar").focus();}},AddManyItems2ShopCartAjax:function(formName,maxCount){MessageHelper.hideAndClearMessage();var form=document.forms[formName];var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";var orderItemsCount=0;for(var i=1;i<=maxCount;i++){if(document.getElementById("catEntryId_"+i)!=null&&document.getElementById("catEntryId_"+i)!=undefined){var currentcatentryInputFieldId=form["catEntryId_"+i].id;var currentQuantityInputFieldId=form["quantity_"+i].id;var currentcatentry=form["catEntryId_"+i].value;var currentQuantity=form["quantity_"+i].value;if((currentcatentry!=null&&currentcatentry!="")||(currentQuantity!=null&&currentQuantity!="")){if(currentcatentry==null||currentcatentry==""){MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}if(!isPositiveInteger(currentQuantity)||currentQuantity<1||currentQuantity>99){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}orderItemsCount=orderItemsCount+1;form["catEntryId_"+i].value=currentcatentry;form["quantity_"+i].value=currentQuantity;this.updateParamObject(params,"catEntryId_"+orderItemsCount,form["catEntryId_"+i].value,true);this.updateParamObject(params,"quantity_"+orderItemsCount,form["quantity_"+i].value,true);}}}params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var contractIdElements=document.getElementsByName("contractSelectForm_contractId");if(contractIdElements!=null&&contractIdElements!="undefined"){for(i=0;i<contractIdElements.length;i++){if(contractIdElements[i].checked){params.contractId=contractIdElements[i].value;break;}}}params.zipCode=this.getCurrentUserZipCode();if(params.zipCode==null){if(this.allowZipCodeDialog){var zipCodePopup=dijit.byId("zip_code_popup");zipCodePopup.show();var args=arguments;var handle=dojo.connect(zipCodePopup,"onZipCodeSelected",null,dojo.hitch(this,function(){this.AddManyItems2ShopCartAjax.apply(this,args);}));var handle2=dojo.connect(zipCodePopup,"hide",null,function(){dojo.disconnect(handle);dojo.disconnect(handle2);});return;}}if(orderItemsCount>0){document.getElementById("showAddToCartModal").value="true";document.getElementById("isModalOpen").value="false";if(!submitRequest()){return;}cursor_wait();if(typeof gtmHelper!="undefined"){for(var i=1;i<=maxCount;i++){if(document.getElementById("catEntryId_"+i)!=null&&document.getElementById("catEntryId_"+i)!=undefined){var currentcatentry=form["catEntryId_"+i].value;if(currentcatentry!=null&&currentcatentry!=""){var gtmQuantity=1;try{gtmQuantity=parseInt(form["quantity_"+i].value);}catch(err){}gtmHelper.sendAddToCart(currentcatentry,gtmQuantity);}}}}if(this.ajaxShopCart){wc.service.invoke("AjaxAddOrderItem",params);this.baseItemAddedToCart=true;}else{wc.service.invoke("AjaxAddOrderItem_shopCart",params);this.baseItemAddedToCart=true;}if(document.getElementById("shoppingCartBar")){document.getElementById("shoppingCartBar").focus();}}},ReplaceItemAjaxHelper:function(catalogEntryId,qty,removeOrderItemId,addressId,shipModeId){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderItemId=removeOrderItemId;params.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var params2=[];params2.storeId=this.storeId;params2.catalogId=this.catalogId;params2.langId=this.langId;params2.catEntryId=catalogEntryId;params2.quantity=qty;params2.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";params2.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var params3=[];params3.storeId=this.storeId;params3.catalogId=this.catalogId;params3.langId=this.langId;params3.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";params3.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params3.allocate="***";params3.backorder="***";params3.remerge="***";params3.check="*n";var shipInfoUpdateNeeded=false;if(addressId!=null&&addressId!=""&&shipModeId!=null&&shipModeId!=""){params3.addressId=addressId;params3.shipModeId=shipModeId;shipInfoUpdateNeeded=true;}wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDelete",formId:"",successHandler:function(serviceResponse){if(!shipInfoUpdateNeeded){wc.service.invoke("AjaxAddOrderItem",params2);}else{wc.service.invoke("AjaxAddOrderItemTemp",params2);}},failureHandler:function(serviceResponse){if(serviceResponse.errorMessage){MessageHelper.displayErrorMessage(serviceResponse.errorMessage);}else{if(serviceResponse.errorMessageKey){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}}cursor_clear();}});wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxOrderChangeServiceItemAdd",formId:"",successHandler:function(serviceResponse){wc.service.invoke("OrderItemAddressShipMethodUpdate",params3);},failureHandler:function(serviceResponse){MessageHelper.displayErrorMessage(serviceResponse.errorMessageKey);}});if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxReplaceItem",params);},AddBundle2WishList:function(form){var productCount=form.numberOfProduct.value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);if(catEntryId!=null){form["catEntryId_"+i].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}}form.action="InterestItemAdd";form.page.value="customerlinkwishlist";if(this.ajaxMyAccount){if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="AjaxLogonForm";}}else{if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="NonAjaxAccountWishListDisplayView";}}if(!submitRequest()){return;}form.submit();},AddBundle2WishListAjax:function(form){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.updateable=0;params.orderId=".";var bundleId=form.bundleId.value;if(bundleId!=null&&bundleId!=""){params.field1=bundleId;}var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.selectedProducts[catEntryArray[i]]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryArray[i]]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxInterestItemAdd",params);},WHRAddBundle2WishListAjax:function(form){if(categoryDisplayJS.userType=="G"){showWishListModal("popup_not_logged");}else{this.AddBundle2WishListAjax(form);}},Add2WishListAjaxByID:function(catalogEntryId){if(catalogEntryId!=null){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.catEntryId=catalogEntryId;params.updateable=0;params.URL="SuccessfulAJAXRequest";if(document.getElementById("controllerURLWishlist")!=null&&document.getElementById("controllerURLWishlist")!="undefined"){CommonControllersDeclarationJS.setControllerURL("WishlistDisplay_Controller",document.getElementById("controllerURLWishlist").value);}if(!submitRequest()){return;}cursor_wait();if(this.ajaxShopCart){wc.service.invoke("AjaxInterestItemAdd",params);}else{wc.service.invoke("AjaxInterestItemAdd_shopCart",params);}}else{if(this.storeFlow=="ORN"||this.storeFlow=="GRN"){showInterestItemAddError(MessageHelper.messages.ERR_RESOLVING_SKU);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);}}},WHRAddManyItems2WishListAjax:function(form,maxCount){MessageHelper.hideAndClearMessage();if(categoryDisplayJS.userType=="G"){showWishListModal("popup_not_logged");}else{this.AddManyItems2WishListAjaxByID(form,maxCount);}},AddManyItems2WishListAjaxByID:function(formName,maxCount){var form=document.forms[formName];var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";var orderItemsCount=0;for(var i=1;i<=maxCount;i++){if(document.getElementById("catEntryId_"+i)!=null&&document.getElementById("catEntryId_"+i)!=undefined){var currentcatentryInputFieldId=form["catEntryId_"+i].id;var currentQuantityInputFieldId=form["quantity_"+i].id;var currentcatentry=form["catEntryId_"+i].value;var currentQuantity=form["quantity_"+i].value;if((currentcatentry!=null&&currentcatentry!="")||(currentQuantity!=null&&currentQuantity!="")){if(currentcatentry==null||currentcatentry==""){MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}if(!isPositiveInteger(currentQuantity)||currentQuantity<1||currentQuantity>99){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}orderItemsCount=orderItemsCount+1;form["catEntryId_"+i].value=currentcatentry;form["quantity_"+i].value=currentQuantity;this.updateParamObject(params,"catEntryId_"+orderItemsCount,form["catEntryId_"+i].value,true);this.updateParamObject(params,"quantity_"+orderItemsCount,form["quantity_"+i].value,true);}}}if(orderItemsCount>=1){if(!submitRequest()){return;}cursor_wait();if(this.ajaxShopCart){wc.service.invoke("AjaxInterestItemAdd",params);}else{wc.service.invoke("AjaxInterestItemAdd_shopCart",params);}}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);}},Add2WishListAjax:function(entitledItemId){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();this.Add2WishListAjaxByID(catalogEntryId);},AddItem2WishListAjax:function(itemId){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.catEntryId=itemId;params.updateable=0;params.URL="SuccessfulAJAXRequest";if(document.getElementById("controllerURLWishlist")!=null&&document.getElementById("controllerURLWishlist")!="undefined"){CommonControllersDeclarationJS.setControllerURL("WishlistDisplay_Controller",document.getElementById("controllerURLWishlist").value);}if(!submitRequest()){return;}cursor_wait();if(this.ajaxShopCart){wc.service.invoke("AjaxInterestItemAdd",params);}else{wc.service.invoke("AjaxInterestItemAdd_shopCart",params);}},Add2WishList:function(entitledItemId,form){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();this.Add2WishListByID(catalogEntryId,form);},Add2WishListByID:function(catalogEntryId,form){if(catalogEntryId!=null){form.productId.value=catalogEntryId;form.catEntryId.value=catalogEntryId;form.action="InterestItemAdd";form.page.value="customerlinkwishlist";if(this.ajaxMyAccount){if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="AjaxLogonForm";}}else{if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="NonAjaxAccountWishListDisplayView";}}form.quantity.value="1";if(!submitRequest()){return;}form.submit();}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);}},AddItem2WishList:function(form){form.action="InterestItemAdd";form.quantity.value="1";form.page.value="customerlinkwishlist";if(this.ajaxMyAccount){if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="AjaxLogonForm";}}else{if(this.userType=="G"){form.URL.value="InterestItemDisplay";}else{form.URL.value="NonAjaxAccountWishListDisplayView";}}if(!submitRequest()){return;}form.submit();},Add2CompareAjax:function(catEntryIdentifier,dragImagePath,url,dragImageDescription){if(compareProductJS!=null){compareProductJS.Add2CompareAjax(catEntryIdentifier,dragImagePath,url,dragImageDescription);}},loadContentURL:function(contentURL){if(!submitRequest()){return;}cursor_wait();CommonControllersDeclarationJS.setControllerURL("CategoryDisplay_Controller",contentURL);wc.render.updateContext("CategoryDisplay_Context");},loadSubCategoryContentURL:function(contentURL){MessageHelper.hideAndClearMessage();if(!submitRequest()){return;}cursor_wait();CommonControllersDeclarationJS.setControllerURL("SubCategoryDisplay_Controller",contentURL);wc.render.updateContext("SubCategoryDisplay_Context");},goBack:function(){categoryDisplayJS.loadContentURL(this.changeUrl);categoryDisplayJS.isHistory=true;},goForward:function(){categoryDisplayJS.loadContentURL(this.changeUrl);isHistory=true;},HistoryTracker:function(elementId,changeUrl){this.elementId=elementId;this.changeUrl=changeUrl;},processBookmarkURL:function(){var bookmarkId=location.hash;if(bookmarkId){bookmarkId=bookmarkId.substring(1,bookmarkId.length);}if(bookmarkId){var indexOfIdentifier=bookmarkId.indexOf("identifier",0);if(indexOfIdentifier>=0){var realUrl=bookmarkId.substring(0,indexOfIdentifier-1);}}if(bookmarkId==null||bookmarkId==""){}},initializeMerchandisingAssociation:function(thumbnailIndex){var associationDisplay=document.getElementById("marchandisingAssociationDisplay");var totalPriceMsg=document.getElementById("totalPriceMsg").value;var baseCatEntryJSON=eval("("+dojo.byId("baseCatEntryDetails").innerHTML+")");this.baseCatalogEntryDetails=baseCatEntryJSON;var basePrice=this.baseCatalogEntryDetails[0].baseCatEntry_Price;this.totalAssociationCount=this.baseCatalogEntryDetails[0].totalAssociations;var identifierJSON="associatedCatEntries_"+thumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;var totalPrice=parseFloat(basePrice)+parseFloat(this.merchandisingAssociationItems[0].catEntry_Price);var dragType="";if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){dragType="product";}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"){dragType="item";}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"){dragType="package";}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){dragType="bundle";}}}}var widgetHTML="";if(document.getElementById("addToCartLink")){var url="AjaxOrderItemDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;widgetHTML=widgetHTML+"<form name='OrderItemAddForm_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' action='OrderChangeServiceItemAdd' method='post' id='OrderItemAddForm_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'>\n<input type='hidden' name='storeId' value='"+this.storeId+"' id='OrderItemAddForm_storeId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='orderId' value='.' id='OrderItemAddForm_orderId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='catalogId' value='"+this.catalogId+"' id='OrderItemAddForm_orderId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='URL' value='"+url+"' id='OrderItemAddForm_url_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='errorViewName' value='InvalidInputErrorView' id='OrderItemAddForm_errorViewName_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='catEntryId' value='"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' id='OrderItemAddForm_catEntryId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='productId' value='"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' id='OrderItemAddForm_productId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='1' name='quantity' id='OrderItemAddForm_quantity_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='' name='page' id='OrderItemAddForm_page_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='-1,-2,-3,-4,-5,-6,-7' name='calculationUsage' id='OrderItemAddForm_calcUsage_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='0' name='updateable' id='OrderItemAddForm_updateable_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n</form>\n";}widgetHTML=widgetHTML+"<div class='scroller' id='WC_CategoryDisplayJS_div_1'>";if(this.totalAssociationCount>1){if(this.associationThumbnailIndex<this.totalAssociationCount){widgetHTML=widgetHTML+"		<a href='Javascript:categoryDisplayJS.showNextAssociation()'  id='WC_ProductAssociation_UpArrow_Link_1'>";}widgetHTML=widgetHTML+"		<img src='"+this.baseCatalogEntryDetails[0].storeImage_Path+"i_up_arrow.png' alt='"+this.displayNextAssociation+"'/></a>";}widgetHTML=widgetHTML+" <br /><div id='baseContent_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'";if(this.merchandisingAssociationItems[0].showProductQuickView=="true"){widgetHTML=widgetHTML+" onmouseover='showPopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");' onmouseout='hidePopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");'>";}else{widgetHTML=widgetHTML+" >";}if(this.merchandisingAssociationItems[0].productDragAndDrop=="true"){widgetHTML=widgetHTML+" <div dojoType='dojo.dnd.Source' jsId='dndSource' id="+this.merchandisingAssociationItems[0].catEntry_Identifier+" copyOnly='true' dndType='"+dragType+"'>		<div class='dojoDndItem' dndType='"+dragType+"' id='WC_CategoryDisplayJS_div_draganddrop'>";}widgetHTML=widgetHTML+"	<a href='"+this.merchandisingAssociationItems[0].catEntry_ProductLink+"'  id='img"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' onfocus='showPopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");'>";if(this.merchandisingAssociationItems[0].productDragAndDrop=="true"&&dojo.isIE==6){widgetHTML=widgetHTML+"<iframe class='productDnDIFrame' scrolling='no' frameborder='0' src='"+getImageDirectoryPath()+"images/empty.gif'></iframe>";}widgetHTML=widgetHTML+"		<img src='"+this.merchandisingAssociationItems[0].catEntry_Thumbnail+"' alt='"+this.merchandisingAssociationItems[0].catEntry_ShortDescription+"' class='img' width='70' height='70'/>	</a><br />";if(this.merchandisingAssociationItems[0].productDragAndDrop=="true"){widgetHTML=widgetHTML+"		</div>	</div>";}if(this.merchandisingAssociationItems[0].showProductQuickView=="true"){widgetHTML=widgetHTML+" <div id='popupButton_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' class='main_quickinfo_button'><span class='secondary_button' >\n<span class='button_container' >\n<span class='button_bg' >\n<span class='button_top'>\n<span class='button_bottom'>\n<a id='QuickInfoButton_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' href='#' onclick='javaScript:var actionListImageAcct = new popupActionProperties(); actionListImageAcct.showWishList="+this.merchandisingAssociationItems[0].associationProductBuyable+"; actionListImageAcct.showAddToCart="+this.merchandisingAssociationItems[0].associationProductBuyable+"; showPopup("+this.merchandisingAssociationItems[0].catEntry_Identifier+","+this.storeId+","+this.langId+","+this.catalogId+",event,null,null,actionListImageAcct);' onkeypress='javaScript:var actionListImageAcct = new popupActionProperties(); actionListImageAcct.showWishList="+this.merchandisingAssociationItems[0].associationProductBuyable+"; actionListImageAcct.showAddToCart="+this.merchandisingAssociationItems[0].associationProductBuyable+"; showPopup("+this.merchandisingAssociationItems[0].catEntry_Identifier+","+this.storeId+","+this.langId+","+this.catalogId+",event,null,null,actionListImageAcct);' onblur='hidePopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");' role='wairole:button' waistate:haspopup='true'>"+this.merchandisingAssociationItems[0].showProductQuickViewLable+"</a></span>\n</span>\n</span>\n</span>\n</span>\n</div>\n";}widgetHTML=widgetHTML+"</div>";if(this.totalAssociationCount>1){if(this.associationThumbnailIndex>1){widgetHTML=widgetHTML+"		<a href='Javascript:categoryDisplayJS.showPreviousAssociation()'  id='WC_ProductAssociation_DownArrow_Link_1'>";}widgetHTML=widgetHTML+"		<img src='"+this.baseCatalogEntryDetails[0].storeImage_Path+"i_down_arrow.png' alt='"+this.displayPrevAssociation+"'/></a>";}var comboText=this.baseCatalogEntryDetails[0].associatedProductsName.replace(/%0/,this.baseCatalogEntryDetails[0].baseCatEntry_Name);comboText=comboText.replace(/%1/,this.merchandisingAssociationItems[0].catEntry_Name);widgetHTML=widgetHTML+"</div><div class='combo_text' id='WC_CategoryDisplayJS_div_2'>\n	<h1 class='status_msg'>"+comboText+"</h1>\n	<span class='grey'>"+totalPriceMsg+dojo.currency.format(totalPrice.toFixed(2),{currency:this.baseCatalogEntryDetails[0].currency})+"</span>\n</div>\n";widgetHTML=widgetHTML+"<input type='hidden' id='compareImgPath_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_Thumbnail_compare+"'/><input type='hidden' id='compareProductDetailsPath_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_ProductLink+"'/><input type='hidden' id='compareImgDescription_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_ShortDescription+"'/>";associationDisplay.innerHTML=null;associationDisplay.innerHTML=widgetHTML;dojo.parser.parse(associationDisplay);},showNextAssociation:function(){if(this.associationThumbnailIndex<this.totalAssociationCount){this.associationThumbnailIndex=this.associationThumbnailIndex+1;this.initializeMerchandisingAssociation(this.associationThumbnailIndex);}},showPreviousAssociation:function(){if(this.associationThumbnailIndex>1){this.associationThumbnailIndex=this.associationThumbnailIndex-1;this.initializeMerchandisingAssociation(this.associationThumbnailIndex);}},AddAssociation2ShopCartAjax:function(baseProductId,baseProductQuantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.baseItemAddedToCart=false;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){this.Add2ShopCartAjax(baseProductId,baseProductQuantity);if(this.baseItemAddedToCart){showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,this.storeId,this.langId,this.catalogId,function(e){return e;},"marchandisingAssociationDisplay");}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var entitledItemJSON=eval("("+dojo.byId(baseProductId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(catalogEntryId!=null){this.updateParamObject(params,"catEntryId",catalogEntryId,false,-1);this.updateParamObject(params,"quantity",baseProductQuantity,false,-1);if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var form=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}}else{this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,false,-1);this.updateParamObject(params,"quantity",1,false,-1);}}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);}}},AddMarchandisingAssociation2ShopCart:function(entitledItemId,form,quantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId_1=this.getCatalogEntryId();if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){if(catalogEntryId_1!=null){form.catEntryId_1.value=catalogEntryId_1;form.productId_1.value=catalogEntryId_1;form.quantity_1.value=quantity;this.merchandisingProductAssociationAddToCart=true;this.merchandisingProductAssociationForm=form;showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,this.storeId,this.langId,this.catalogId,function(e){return e;},"marchandisingAssociationDisplay");}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){if(catalogEntryId_1!=null){form.catEntryId_1.value=catalogEntryId_1;form.productId_1.value=catalogEntryId_1;form.quantity_1.value=quantity;if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=bundleForm.catEntryIDS.value.toString().split(",");var catEntryCount=3;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){if(i==0){form.catEntryId_2.value=catEntryId;form.productId_2.value=catEntryId;form.quantity_2.value=qty;}else{var input1=document.createElement("input");input1.setAttribute("id","OrderAssociationItemAddForm_catEntryId_"+catEntryId);input1.setAttribute("type","hidden");input1.setAttribute("name","catEntryId_"+catEntryCount);input1.setAttribute("value",catEntryId);form.appendChild(input1);var input2=document.createElement("input");input2.setAttribute("id","OrderAssociationItemAddForm_productId_"+catEntryId);input2.setAttribute("type","hidden");input2.setAttribute("name","productId_"+catEntryCount);input2.setAttribute("value",catEntryId);form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderAssociationItemAddForm_quantity_"+catEntryId);quantity1.setAttribute("type","hidden");quantity1.setAttribute("name","quantity_"+catEntryCount);quantity1.setAttribute("value","1");form.appendChild(quantity1);catEntryCount=catEntryCount+1;}}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}}else{form.catEntryId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.productId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.quantity_2.value="1";}if(!submitRequest()){return;}form.submit();}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}}},AddAssociation2ShopCart:function(associatedItemId,quantity){var form=this.merchandisingProductAssociationForm;this.merchandisingProductAssociationAddToCart=false;if(this.isParentBundleBean){var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");var bundleItemsCount=1;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.selectedProducts[catEntryArray[i]]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryArray[i]]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){var input1=document.createElement("input");input1.setAttribute("id","OrderItemAddForm_catEntryId_"+catEntryId);input1.setAttribute("type","hidden");input1.setAttribute("name","catEntryId_"+bundleItemsCount);input1.setAttribute("value",catEntryId);bundleItemsCount=bundleItemsCount+1;form.appendChild(input1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+associatedItemId);input2.setAttribute("type","hidden");input2.setAttribute("name","catEntryId_"+bundleItemsCount);input2.setAttribute("value",associatedItemId);form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderItemAddForm_quantity_"+associatedItemId);quantity1.setAttribute("type","hidden");quantity1.setAttribute("name","quantity_"+bundleItemsCount);quantity1.setAttribute("value",quantity);form.appendChild(quantity1);form.URL.value="AjaxOrderItemDisplayView";this.isParentBundleBean=false;}else{form.catEntryId_2.value=associatedItemId;form.productId_2.value=associatedItemId;form.quantity_2.value=quantity;}if(!submitRequest()){return;}form.submit();this.merchandisingProductAssociationForm="";},AddAssociationItem2ShopCartAjax:function(baseItemId,baseItemQuantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.baseItemAddedToCart=false;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){this.AddItem2ShopCartAjax(baseItemId,baseItemQuantity);if(this.baseItemAddedToCart){showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,this.storeId,this.langId,this.catalogId,function(e){return e;},"marchandisingAssociationDisplay");}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";this.updateParamObject(params,"catEntryId",baseItemId,false,-1);this.updateParamObject(params,"quantity",baseItemQuantity,false,-1);if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var form=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}}else{this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,false,-1);this.updateParamObject(params,"quantity",1,false,-1);}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);}}},AddAssociationItem2ShopCart:function(form,quantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){if(quantity){form.quantity_1.value=quantity;}this.merchandisingProductAssociationAddToCart=true;this.merchandisingProductAssociationForm=form;showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,this.storeId,this.langId,this.catalogId,function(e){return e;},"marchandisingAssociationDisplay");}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){if(quantity){form.quantity_1.value=quantity;}if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var catEntryArray=[];catEntryArray=bundleForm.catEntryIDS.value.toString().split(",");var catEntryCount=3;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(i==0){form.catEntryId_2.value=catEntryId;form.productId_2.value=catEntryId;form.quantity_2.value=qty;}else{var input1=document.createElement("input");input1.setAttribute("id","OrderAssociationItemAddForm_catEntryId_"+catEntryId);input1.setAttribute("type","hidden");input1.setAttribute("name","catEntryId_"+catEntryCount);input1.setAttribute("value",catEntryId);form.appendChild(input1);var input2=document.createElement("input");input2.setAttribute("id","OrderAssociationItemAddForm_productId_"+catEntryId);input2.setAttribute("type","hidden");input2.setAttribute("name","productId_"+catEntryCount);input2.setAttribute("value",catEntryId);form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderAssociationItemAddForm_quantity_"+catEntryId);quantity1.setAttribute("type","hidden");quantity1.setAttribute("name","quantity_"+catEntryCount);quantity1.setAttribute("value","1");form.appendChild(quantity1);catEntryCount=catEntryCount+1;}}}else{form.catEntryId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.productId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier;form.quantity_2.value="1";}if(!submitRequest()){return;}form.submit();}}},AddAssociationBundle2ShopCartAjax:function(form){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.baseItemAddedToCart=false;var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);this.baseItemAddedToCart="true";}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var innerCatEntryArray=[];innerCatEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var i=0;i<innerCatEntryArray.length;i++){var qty=document.getElementById("quantity_"+innerCatEntryArray[i]).value;var innerCatEntryId=innerCatEntryArray[i];if(this.getDefaultItem(innerCatEntryArray[i])){innerCatEntryId=this.getDefaultItem(innerCatEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&innerCatEntryId!=null){this.updateParamObject(params,"catEntryId",innerCatEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"){this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,false,-1);this.updateParamObject(params,"quantity",1,false,-1);}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,this.storeId,this.langId,this.catalogId,function(e){return e;},"marchandisingAssociationDisplay");}},setOrderId:function(orderId){this.orderId=orderId;},AddAssociationBundle2ShopCart:function(form){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex;var associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;this.isParentBundleBean=true;if(this.merchandisingAssociationItems[0].catEntry_Type=="ProductBean"){this.merchandisingProductAssociationAddToCart=true;this.merchandisingProductAssociationForm=form;var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");var bundleItemsCount=1;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(catEntryId!=null){form["catEntryId_"+catEntryArray[i]].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}bundleItemsCount=bundleItemsCount+1;}showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,this.storeId,this.langId,this.catalogId,function(e){return e;},"marchandisingAssociationDisplay");}else{if(this.merchandisingAssociationItems[0].catEntry_Type=="ItemBean"||this.merchandisingAssociationItems[0].catEntry_Type=="PackageBean"||this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");var bundleItemsCount=1;for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value;var catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])){catEntryId=this.getDefaultItem(catEntryArray[i]);}if(catEntryId!=null){form["catEntryId_"+catEntryArray[i]].value=catEntryId;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}bundleItemsCount=bundleItemsCount+1;}if(this.merchandisingAssociationItems[0].catEntry_Type=="BundleBean"){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId);var innerCatEntryArray=[];innerCatEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var i=0;i<innerCatEntryArray.length;i++){var qty=document.getElementById("quantity_"+innerCatEntryArray[i]).value;var innerCatEntryId=innerCatEntryArray[i];if(this.getDefaultItem(innerCatEntryArray[i])){innerCatEntryId=this.getDefaultItem(innerCatEntryArray[i]);}if(qty==0||qty==null){qty=1;}if(qty!=null&&qty!=""&&innerCatEntryId!=null){var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+innerCatEntryId);input2.setAttribute("type","hidden");input2.setAttribute("name","catEntryId_"+bundleItemsCount);input2.setAttribute("value",innerCatEntryId);form.appendChild(input2);var quantity2=document.createElement("input");quantity2.setAttribute("id","OrderItemAddForm_quantity_"+innerCatEntryId);quantity2.setAttribute("type","hidden");quantity2.setAttribute("name","quantity_"+bundleItemsCount);quantity2.setAttribute("value","1");form.appendChild(quantity2);bundleItemsCount=bundleItemsCount+1;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);return;}}}else{var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+this.merchandisingAssociationItems[0].catEntry_Identifier);input2.setAttribute("type","hidden");input2.setAttribute("name","catEntryId_"+bundleItemsCount);input2.setAttribute("value",this.merchandisingAssociationItems[0].catEntry_Identifier);form.appendChild(input2);var quantity2=document.createElement("input");quantity2.setAttribute("id","OrderItemAddForm_quantity_"+this.merchandisingAssociationItems[0].catEntry_Identifier);quantity2.setAttribute("type","hidden");quantity2.setAttribute("name","quantity_"+bundleItemsCount);quantity2.setAttribute("value","1");form.appendChild(quantity2);}form.URL.value="AjaxOrderItemDisplayView";if(!submitRequest()){return;}form.submit();}}},addToNewListFromProductDetail:function(entitledItemId,quantityElemId,currentPage){MessageHelper.hideAndClearMessage();var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){this.addItemToNewListFromProductDetail(catalogEntryId,quantityElemId,currentPage);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}return;}},addItemToNewListFromProductDetail:function(catalogEntryId,quantityElemId,currentPage){MessageHelper.hideAndClearMessage();if(catalogEntryId!=null){var quantity=document.getElementById(quantityElemId).value;if(quantity==null||quantity==""||quantity<=0||!RequisitionList.isNumber(quantity)){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}return;}if(this.ajaxMyAccount){var URL="AjaxLogonForm?page=createrequisitionlist";}else{var URL="RequisitionListDetailView?editable=true&newList=true";}var formObj=document.createElement("form");formObj.setAttribute("method","POST");var input=document.createElement("input");input.setAttribute("type","hidden");input.setAttribute("value",currentPage);input.setAttribute("name","previousPage");formObj.appendChild(input);formObj.action=URL+"&catEntryId="+catalogEntryId+"&quantity="+quantity+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;document.body.appendChild(formObj);formObj.submit();}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);}},addBundleToNewListFromProductDetail:function(form,currentPage){var productCount=form.numberOfProduct.value;var URL="";if(this.ajaxMyAccount){URL="AjaxLogonForm?page=createrequisitionlist";}else{URL="RequisitionListDetailView?editable=true&newList=true";}for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0||!RequisitionList.isNumber(qty)){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}else{if(catEntryId!=null){URL=URL+"&catEntryId="+catEntryId+"&quantity="+qty;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);return;}}}var input=document.createElement("input");input.setAttribute("type","hidden");input.setAttribute("value",currentPage);input.setAttribute("name","previousPage");form.appendChild(input);URL=URL+"&numberOfProduct="+form.numberOfProduct.value+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;form.action=URL;form.submit();},addToExistingRequisitionList:function(entitledItemId,quantityElemId,ajaxAddToCart){var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null){this.addItemToExistingRequisitionList(catalogEntryId,quantityElemId,ajaxAddToCart);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);}},addBundleToExistingRequisitionList:function(form,ajaxAddToCart){var reqListSelection=document.getElementsByName("RequisitionListTableDisplay_RequisitionListSelection");for(var i=0;i<reqListSelection.length;i++){if(reqListSelection.item(i).checked){var requisitionListId=reqListSelection.item(i).value;}}if(ajaxAddToCart){var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.requisitionListId=requisitionListId;var productCount=form.numberOfProduct.value;for(var i=1;i<=productCount;i++){var catEntryId=form["catEntryId_"+i].value;if(this.selectedProducts[catEntryId]){catEntryId=this.getCatalogEntryIdforProduct(this.selectedProducts[catEntryId]);}var qty=form["quantity_"+i].value;if(qty==null||qty==""||qty<=0||!RequisitionList.isNumber(qty)){MessageHelper.displayeErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}else{if(qty!=null&&qty!=""&&catEntryId!=null){this.updateParamObject(params,"catEntryId",catEntryId,false,-1);this.updateParamObject(params,"quantity",qty,false,-1);this.baseItemAddedToCart=true;}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);return;}}}if(!submitRequest()){return;}cursor_wait();wc.service.invoke("requisitionListAddItem_popup",params);}else{form.action="RequisitionListItemUpdate?requisitionListId="+requisitionListId;if(this.ajaxMyAccount){form.URL.value="AjaxLogonForm?page=editrequisitionlist&requisitionListId="+requisitionListId+"&editable=true";}else{form.URL.value="RequisitionListDetailView?requisitionListId="+requisitionListId+"&editable=true";}if(!submitRequest()){return;}cursor_wait();form.submit();}},addItemToExistingRequisitionList:function(catalogEntryId,quantityElemId,ajaxAddToCart){if(catalogEntryId!=null){var quantity=document.getElementById(quantityElemId).value;if(!RequisitionList.isNumber(quantity)||quantity<=0){if(quantityElemId=="productPopUpQty"){MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);if(dijit.byId("second_level_category_popup")!=null){hidePopup("second_level_category_popup");}return;}else{MessageHelper.formErrorHandleClient(quantityElemId,MessageHelper.messages.QUANTITY_INPUT_ERROR);return;}}var reqListSelection=document.getElementsByName("RequisitionListTableDisplay_RequisitionListSelection");for(var i=0;i<reqListSelection.length;i++){if(reqListSelection.item(i).checked){var requisitionListId=reqListSelection.item(i).value;}}if(ajaxAddToCart){var params={};params.requisitionListId=requisitionListId;params.catEntryId=catalogEntryId;params.quantity=quantity;params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;if(!submitRequest()){return;}cursor_wait();wc.service.invoke("requisitionListAddItem_popup",params);}else{var form=document.forms.RequisitionListPopupForm;form.requisitionListId.value=requisitionListId;form.quantity.value=quantity;form.catEntryId.value=catalogEntryId;if(this.ajaxMyAccount){form.URL.value="AjaxLogonForm?page=editrequisitionlist&requisitionListId="+requisitionListId+"&editable=true";}else{form.URL.value="RequisitionListDetailView?requisitionListId="+requisitionListId+"&editable=true";}if(!submitRequest()){return;}cursor_wait();form.submit();}}else{MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);}},setCurrentPageType:function(pageType){this.currentPageType=pageType;},setCurrentCatalogEntryId:function(catalogEntryId){this.currentCatalogEntryId=catalogEntryId;},setEntitledItemEspotJsonObject:function(jsonObject){this.entitledItemEspotJsonObject=jsonObject;},getEntitledItemEspotJsonObject:function(){return this.entitledItemEspotJsonObject;},UpdateEspotContent:function(emsName,destinationId,entitledItemId,entitledItemEspotId){var entitledItemSpotJSON;if(dojo.byId(entitledItemEspotId)!=null){entitledItemSpotJSON=eval("("+dojo.byId(entitledItemEspotId).innerHTML+")");}else{entitledItemSpotJSON=this.getEntitledItemEspotJsonObject();}var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(catalogEntryId!=null&&document.getElementById(destinationId)){for(var i in entitledItemSpotJSON){if(entitledItemSpotJSON[i].catentry_id==catalogEntryId){for(var j in entitledItemSpotJSON[i].content){if(entitledItemSpotJSON[i].content[j].key==emsName){var newcontent=entitledItemSpotJSON[i].content[j].value;if(newcontent!=null){newcontent=unescape(newcontent);newcontent=newcontent.replace(/&lt;/gi,"<");newcontent=newcontent.replace(/&gt;/gi,">");newcontent=newcontent.replace(/&amp;/gi,"&");document.getElementById(destinationId).innerHTML=newcontent;}}}}}}},DeleteItemFromCart:function(orderItemId){if(!this.ajaxShopCart){return;}var params=[];params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=(this.orderId!=null&&this.orderId!="undefined"&&this.orderId!="")?this.orderId:".";params.orderItemId=orderItemId;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxDeleteOrderItem",params);},getCurrentUserZipCode:function(){var zipRegCookie=dojo.cookie("WHR_zipreg");if(zipRegCookie!=null&&zipRegCookie!=""){var zipCdRegionArr=zipRegCookie.split("|");return zipCdRegionArr[0];}return null;},accessoriesPopupContentStrings:{},allowAccessoryDialogRemove:false,setupAccessoriesPopup:function(){var params=dojo.fromJson(dojo.byId("category_accessory_popup_params").innerHTML);var mainOrderItemId=params.mainOrderItemId;var mainOrderItemQty=params.mainOrderItemQty;var functionRegistry={ACC:{functionAdd:dojo.hitch(this,this.accessoryAddToCartClick),functionRemove:dojo.hitch(this,this.accessoryRemoveFromCartClick)},ESP:{functionAdd:dojo.hitch(this,this.espAddToCartClick),functionRemove:dojo.hitch(this,this.espRemoveFromCartClick)}};MessageHelper.setMessage("ACCDLG_PLEASE_CHOOSE_PLAN",this.accessoriesPopupContentStrings.ACCDLG_PLEASE_CHOOSE_PLAN);var allowRemove=this.allowAccessoryDialogRemove;var ts=new Date().getTime();var controllerName="accessoryPopupController"+ts;var refreshAreaName="accessoryPopupArea"+ts;var accessoryPopupRenderContext=wc.render.getContextById("accessoryPopupContext");if(!accessoryPopupRenderContext||accessoryPopupRenderContext==null){wc.render.declareContext("accessoryPopupContext",{itemUpdatingId:"",triggeringButton:null,context:null},"");}var contentStrings=this.accessoriesPopupContentStrings;wc.render.declareRefreshController({id:controllerName,renderContext:wc.render.getContextById("accessoryPopupContext"),url:"",formId:"",modelChangedHandler:function(message,widget){var controller=this;var renderContext=this.renderContext;if(message.actionId==="AjaxAddOrderItem"){var buttonObj=renderContext.properties.triggeringButton;if(buttonObj!=null){dojo.removeClass(buttonObj,"ui-button");dojo.addClass(buttonObj,"ui-button gray");if(allowRemove){var context=renderContext.properties.context;var orderItemId=message.orderItemId[0];buttonObj.onclick=function(evt){functionRegistry[context].functionRemove(this,orderItemId,mainOrderItemId);};}else{if(buttonObj.id=="esp_add_cart_button"){document.getElementById("modal_esp_add_button").innerHTML=contentStrings.ACCDLG_BUTTON_ADDED;}else{document.getElementById("modal_button_added_"+renderContext.properties.itemUpdatingId).innerHTML=contentStrings.ACCDLG_BUTTON_ADDED;}buttonObj.onclick=function(evt){};}}}else{if(message.actionId==="AjaxDeleteOrderItem"){var buttonObj=renderContext.properties.triggeringButton;if(buttonObj!=null){dojo.removeClass(buttonObj,"button_2");dojo.addClass(buttonObj,"button_5");var context=renderContext.properties.context;var nodeList=dojo.query("> div.accdlg_original_item_id",buttonObj.parentNode);var itemId=dojo.fromJson(nodeList[0].innerHTML).itemId;buttonObj.onclick=function(evt){functionRegistry[context].functionAdd(this,itemId,mainOrderItemId,mainOrderItemQty);};}cursor_clear();}}}});var refreshArea=new wc.widget.RefreshArea({id:refreshAreaName,widgetId:refreshAreaName,controllerId:controllerName});refreshArea.startup();},popup_AddAccessory2ShopCartAjax:function(itemId,fromPage){var subscriptionSelect=$("#category_accessory_popup_subscr_freq_"+itemId);var subscription;if(subscriptionSelect.length>0){var selectedVal=subscriptionSelect[0].options[subscriptionSelect[0].selectedIndex].value;if(selectedVal!="0"){subscription=selectedVal;}}var params={};params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.quantity=1;params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";params.frequency=subscription;params.zipCode=this.getCurrentUserZipCode();if(params.zipCode==null){if(this.allowZipCodeDialog){var zipCodePopup=dijit.byId("zip_code_popup");zipCodePopup.show();var args=arguments;var handle=dojo.connect(zipCodePopup,"onZipCodeSelected",null,dojo.hitch(this,function(){this.popup_AddAccessory2ShopCartAjax.apply(this,args);}));var handle2=dojo.connect(zipCodePopup,"hide",null,function(){dojo.disconnect(handle);dojo.disconnect(handle2);});return;}}if(fromPage=="productdetail"){var entitledItemId="entitledItem_"+itemId;var entitledItemJSON;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");}else{entitledItemJSON=this.getEntitledItemJsonObject();}this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();itemId=catalogEntryId;}params.catEntryId=itemId;if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);},accessoryAddToCartClick:function(button,itemId,mainOrderItemId,mainOrderItemQty){wc.render.updateContext("accessoryPopupContext",{itemUpdatingId:itemId,triggeringButton:button,context:"ACC"});setCurrentId(button.id);this.popup_AddAccessory2ShopCartAjax(itemId);},replacementprogramAddToCartClick:function(itemId,fromPage){this.allowAccessoryDialog=false;this.popup_AddAccessory2ShopCartAjax(itemId,fromPage);},accessoryRemoveFromCartClick:function(button,orderItemId,mainOrderItemId){wc.render.updateContext("accessoryPopupContext",{itemUpdatingId:orderItemId,triggeringButton:button,context:"ACC"});setCurrentId(button.id);this.DeleteItemFromCart(orderItemId);},popup_AddESP2ShopCartAjax:function(espCatEntryId,mainOrderItemId,mainOrderItemQty){var params={};params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderId=".";params.catEntryId=espCatEntryId;params.quantity=mainOrderItemQty;params.zipCode=this.getCurrentUserZipCode();params.mainOrderItemId=mainOrderItemId;MessageHelper.alternateErrorTextId="ESPErrorMessageText";MessageHelper.alternateMessageTextId="ESPMessageArea";if(!submitRequest()){return;}cursor_wait();wc.service.invoke("AjaxAddOrderItem",params);},espAddToCartClick:function(button,itemId,mainOrderItemId,mainOrderItemQty){var selectBox=document.getElementById("ESPPlanLengthSelect");itemId=selectBox.options[selectBox.selectedIndex].value;if("0"==itemId){MessageHelper.formErrorHandleClient(document.getElementById("ESPPlanLengthSelect"),MessageHelper.messages.ACCDLG_PLEASE_CHOOSE_PLAN);return;}wc.render.updateContext("accessoryPopupContext",{itemUpdatingId:itemId,triggeringButton:button,context:"ESP"});setCurrentId(button.id);this.popup_AddESP2ShopCartAjax(itemId,mainOrderItemId,mainOrderItemQty);},espRemoveFromCartClick:function(button,orderItemId,mainOrderItemId){wc.render.updateContext("accessoryPopupContext",{itemUpdatingId:orderItemId,triggeringButton:button,context:"ESP"});setCurrentId(button.id);this.DeleteItemFromCart(orderItemId);},hideAccessoriesPopup:function(){dijit.byId("category_accessory_popup").hide();},updateSubscriptionFrequency:function(button,freqBox,orderItemId,closeOnComplete){var frequency=freqBox.options[freqBox.selectedIndex].value;var params=[];params.orderId=".";params.storeId=this.storeId;params.catalogId=this.catalogId;params.langId=this.langId;params.orderItemId=orderItemId;params.frequency=frequency;params.invCheck="false";params.zipCode=this.getCurrentUserZipCode();setCurrentId(button.id);if(!submitRequest()){return;}cursor_wait();var service=wc.service.getServiceById("AjaxUpdateOrderItem");var handle2=null;var handle=dojo.connect(service,"successHandler",this,function(){dojo.disconnect(handle);dojo.disconnect(handle2);if(closeOnComplete){this.hideAccessoriesPopup();}else{button.innerHTML=this.accessoriesPopupContentStrings.ACCDLG_BUTTON_SUBSCRIBED;button.onclick=function(evt){};}});handle2=dojo.connect(service,"failureHandler",this,function(){dojo.disconnect(handle);dojo.disconnect(handle2);if(closeOnComplete){this.hideAccessoriesPopup();}});service.invoke(params);},loadBundleURL:function(bundleURL){if(!submitRequest()){return;}cursor_wait();CommonControllersDeclarationJS.setControllerURL("bundleDisplay_Controller",bundleURL);wc.render.updateContext("bundleDisplay_Context");},setQuickviewItemId:function(quickviewItemId){this.quickviewItemId=quickviewItemId;},setQuickviewPairedItemId:function(quickviewPairedItemId){this.quickviewPairedItemId=quickviewPairedItemId;},getQuickviewItemId:function(){return this.quickviewItemId;},getQuickviewPairedItemId:function(){return this.quickviewPairedItemId;},quickviewAddtoWishlist:function(quickViewTab){if(quickViewTab=="main"){this.Add2WishListAjaxByID(this.quickviewItemId);}if(quickViewTab=="paired"){this.Add2WishListAjaxByID(this.quickviewPairedItemId);}},quickviewAddtoShoppingCart:function(quickViewTab){if(quickViewTab=="main"){this.AddItem2ShopCartAjax(this.quickviewItemId,1);}if(quickViewTab=="paired"){this.AddItem2ShopCartAjax(this.quickviewPairedItemId,1);}}};categoryDisplayJS.HistoryTracker.prototype.back=categoryDisplayJS.goBack;categoryDisplayJS.HistoryTracker.prototype.forward=categoryDisplayJS.goForward;function contactUS(){var ContactURL=document.getElementById("ContactURL");var params="width=2000,height=4000,location=1,status=1,scrollbars=1";var url=$("#ContactURL").text();newwin=window.open(url,"_blank",params);return false;}dojo.require("wc.service.common");compareProductJS={compareCounter:0,compareRowCounter:0,compareItemCatEntry:new Object(),langId:"-1",storeId:"",catalogId:"",properties:new Object(),errorMessages:new Object(),compareProductsCookie:"cmpcatgrpitems_",initialized:false,setCommonParameters:function(langId,storeId,catalogId){this.langId=langId;this.storeId=storeId;this.catalogId=catalogId;this.compareProductsCookie=this.compareProductsCookie+storeId;this.initialized=true;},setErrorMessage:function(key,value){this.errorMessages[key]=value;},getErrorMessage:function(key){var value=this.errorMessages[key];if(value==null){value="Could not get the message value for specified key "+key;}return value;},setProperty:function(name,value){this.properties[name]=value;},getProperty:function(name){return this.properties[name];},getStorageKey:function(){var storageKey="CompareItems"+this.storeId;var sessionId=this.getProperty("sessionId");var sessionCode=0;storageKey=storageKey+sessionCode;return storageKey;},load:function(key){if(key==null||typeof key=="undefined"||key==""){alert("Please provide a key");return;}return this._load(key);},save:function(key,value){if(key==null||typeof key=="undefined"||key==""){alert("Please provide a key");return;}if(value==null||typeof value=="undefined"||value==""){alert("Please provide a key value");return;}this._save(key,value);},clear:function(){if(this.compareCounter!=0){MessageHelper.hideAndClearMessage();}if(this.currentProvider=="flash"){dojo.storage.clear();}else{if(this.compareCounter>0){var storageKey=this.getStorageKey();dojo.cookie(storageKey,null);this.initializeCompare();var form=document.getElementById("CompareForm");var compare=document.getElementById("compareZone");var childNodes=compare.childNodes;for(i=0;i<childNodes.length;i++){compare.removeChild(childNodes[i]);}var div1=document.createElement("div");div1.setAttribute("id","compareDropZoneImg");div1.setAttribute("class","items");div1.innerHTML=form.clearMsg.value;var div2=document.createElement("div");div2.innerHTML="&nbsp;";div1.appendChild(div2);compare.appendChild(div1);document.getElementById("compareDropZoneImg").style.padding="5px";if(document.getElementById("compareProductPage")!=null&&document.getElementById("compareProductPage")!="undefined"){if(document.getElementById("compareProductPage").value){var url=document.CompareForm.action+"?storeId="+document.CompareForm.storeId.value+"&catalogId="+document.CompareForm.catalogId.value+"&langId="+document.CompareForm.langId.value+"&categoryId= ";document.location.href=url;}}MessageHelper.displayStatusMessage(MessageHelper.messages.COMPARE_ITEMS_CLEAR);}}},remove:function(key){if(this.currentProvider=="flash"){dojo.storage.remove(key);}else{var storageKey=this.getStorageKey();var result=this.load(storageKey);if(result!=null){this.compareItemCatEntry=result;}delete this.compareItemCatEntry[key];this.save(storageKey,this.compareItemCatEntry);this.compareProducts();}},_save:function(key,value,days,path,domain,secure,clearCurrent){if(this.currentProvider=="flash"){var self=this;var saveHandler=function(status,keyName){if(status==dojo.storage.FAILED){alert("You do not have permission to store data for this web site. Press the Configure button to grant permission.");}else{if(status==dojo.storage.SUCCESS){}}};try{dojo.storage.put(key,value,saveHandler);}catch(exp){alert(exp);}}else{value=dojo.toJson(value);dojo.cookie(key,value,days,path,domain,secure,clearCurrent);}},_load:function(key){if(this.currentProvider=="flash"){var results=dojo.storage.get(key);return results;}else{var value=dojo.cookie(key);value=dojo.fromJson(value);return value;}},initializeCompare:function(){var storageKey=this.getStorageKey();this.compareCounter=0;this.compareRowCounter=0;this.compareItemCatEntry=new Object();var result=this.load(storageKey);if(result!=null){this.compareItemCatEntry=result;}var compare=document.getElementById("compareZone");var childNodes=compare.childNodes;for(i=0;i<childNodes.length;i++){if(childNodes[i].id!="compareDropZoneImg"){compare.removeChild(childNodes[i]);}}var firstItem=true;for(catEntryIdentifier in this.compareItemCatEntry){this.compareCounter++;if(this.compareCounter<=4){var catentryAddedToCompare=document.CompareForm.catentryId[this.compareCounter-1].value=catEntryIdentifier;for(i=0;i<childNodes.length;i++){if(childNodes[i].id=="compareDropZoneImg"){compare.removeChild(childNodes[i]);}}var td1=document.createElement("td");td1.setAttribute("id","compareCatentry"+catentryAddedToCompare);var div2=document.createElement("div");div2.setAttribute("id","compareCatentryContainer"+catentryAddedToCompare);td1.appendChild(div2);div2.innerHTML=this.compareItemCatEntry[catEntryIdentifier];var node=dojo.query(":first-child",div2);if(((this.compareCounter-1)%4)==0){this.compareRowCounter++;var tr1=document.createElement("tr");tr1.setAttribute("id","compareRow"+this.compareRowCounter);}else{var tr1=document.getElementById("compareRow"+this.compareRowCounter);}tr1.appendChild(td1);if(firstItem){var div1=document.createElement("div");div1.setAttribute("id","compareDropZoneImgDiv");div1.style.width="100%";var table1=document.createElement("table");var tbody1=document.createElement("tbody");tbody1.setAttribute("id","compareItemsTable");table1.appendChild(tbody1);tbody1.appendChild(tr1);div1.appendChild(table1);compare.appendChild(div1);}else{var tbody1=document.getElementById("compareItemsTable");tbody1.appendChild(tr1);}firstItem=false;}}},Add2CompareAjax:function(catEntryIdentifier,dragImagePath,url,dragImageDescription){MessageHelper.hideAndClearMessage();var storageKey=this.getStorageKey();if(catEntryIdentifier in this.compareItemCatEntry||catEntryIdentifier==null){MessageHelper.displayErrorMessage(MessageHelper.messages.COMPARE_ITEM_EXISTS);}else{this.compareCounter++;if(this.compareCounter<=4){document.CompareForm.catentryId[this.compareCounter-1].value=catEntryIdentifier;var _id="Compare_Item_"+catEntryIdentifier;var itemHTML="	<a id='imgcatBrowse"+_id+"' href='"+url+"' >\n		<img width='40' height='40' src='"+dragImagePath+"' alt='"+dragImageDescription+"' border='0' />\n	</a>\n";itemHTML=itemHTML.replace(/\"/g,"'").replace(/\r|\n|\r\n|\n\r/g,"");this.compareItemCatEntry[catEntryIdentifier]=itemHTML;this.save(storageKey,this.compareItemCatEntry,-1);this.initializeCompare();if(document.getElementById("compareProductPage")!=null&&document.getElementById("compareProductPage")!="undefined"){if(document.getElementById("compareProductPage").value){this.compareProducts();}}MessageHelper.displayStatusMessage(MessageHelper.messages.COMPAREZONE_ADDED);}else{MessageHelper.displayErrorMessage(MessageHelper.messages.COMPATE_MAX_ITEMS);}}},compareProducts:function(){var storageKey=this.getStorageKey();var result=this.load(storageKey);if(result!=null){this.compareItemCatEntry=result;}if(document.CompareForm!=null&&document.CompareForm!="undefined"){var url="CompareProductsDisplay?storeId="+document.CompareForm.storeId.value+"&catalogId="+document.CompareForm.catalogId.value+"&langId="+document.CompareForm.langId.value+"&categoryId="+document.CompareForm.categoryId.value+"&top="+document.CompareForm.top.value;}else{var url="CompareProductsDisplay?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;}for(catEntryIdentifier in this.compareItemCatEntry){url=url+"&catentryId="+catEntryIdentifier;}document.location.href=getAbsoluteURL()+url;},init:function(){dojo.subscribe("/dnd/drop",function(source,nodes,copy,target){target.deleteSelectedNodes();var productDisplayPath="";var imgPath="";var imgDescription="";if(target.parent.id=="compareZone"){var indexOfIdentifier=source.parent.id.indexOf("_",0);if(indexOfIdentifier>=0){source.parent.id=source.parent.id.substring(indexOfIdentifier+1);}if(document.getElementById("compareImgPath_"+source.parent.id)!=null&&document.getElementById("compareImgPath_"+source.parent.id)!=undefined){imgPath=document.getElementById("compareImgPath_"+source.parent.id).value;}if(document.getElementById("compareProductDetailsPath_"+source.parent.id)!=null&&document.getElementById("compareProductDetailsPath_"+source.parent.id)!=undefined){productDisplayPath=document.getElementById("compareProductDetailsPath_"+source.parent.id).value;}if(document.getElementById("compareImgDescription_"+source.parent.id)!=null&&document.getElementById("compareImgDescription_"+source.parent.id)!=undefined){imgDescription=document.getElementById("compareImgDescription_"+source.parent.id).value;}compareProductJS.Add2CompareAjax(source.parent.id,imgPath,productDisplayPath,imgDescription);}});},getCompareCookie:function(){return dojo.cookie(this.compareProductsCookie);},compareThisProduct:function(cbInfo){var arrayItems=(cbInfo.value).split("|");var vCatgroupId=arrayItems[0];var vCatentryId=arrayItems[1];if(cbInfo.checked==true){this.addtoCompare(vCatgroupId,vCatentryId,"");}else{this.removefromCompare(vCatgroupId,vCatentryId);}},removeCategory:function(catgroupId,compareUrl){if(catgroupId!=null&&catgroupId!=""){this.removefromCompare(catgroupId,null);window.location=compareUrl;}},removeProduct:function(catgroupId,catentryId,compareUrl){if(catgroupId!=null&&catgroupId!=""&&catentryId!=null&&catentryId!=""){this.removefromCompare(catgroupId,catentryId);window.location=compareUrl;}},addtoCompareProduct:function(catgroupId,productId){var entitledItemJSON;var entitledItemId="entitledItem_"+productId;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");categoryDisplayJS.setEntitledItems(entitledItemJSON);}var selectedItemID=categoryDisplayJS.getCatalogEntryId();this.addtoCompare(catgroupId,selectedItemID,"");},addtoCompare:function(catgroupId,catentryId,viewMode){if(!this.initialized){return;}var nCompareList=this.getCompareCookie();var nError=0;if(nCompareList==null||nCompareList==""){nCompareList=catgroupId+":"+catentryId;dojo.cookie(this.compareProductsCookie,nCompareList,{path:"/"});this.switchtoCompareNow(viewMode,catentryId);}else{if(catgroupId!=null&&catgroupId!=""&&catentryId!=null&&catentryId!=""){if(nCompareList.indexOf(catgroupId)>-1){if(catentryId!==null&&nCompareList.indexOf(catentryId)>-1){this.switchtoCompareNow(viewMode,catentryId);}else{var tempArray="";var tempTabInfo="";var index=0;var arrayTab=nCompareList.split("|");var tabCount=arrayTab.length-1;for(index=0;index<arrayTab.length;index++){if(arrayTab[index]!=""&&arrayTab[index].indexOf(catgroupId)>-1){var tabInfo=arrayTab[index].split(":");var tabCatgroupInfo=tabInfo[0];var tabCatentryInfo=tabInfo[1];if(tabCatentryInfo!=null){var tabCatentryArray=tabCatentryInfo.split("_");if(tabCatentryArray.length<4){if(catentryId!==null&&tabCatentryInfo.indexOf(catentryId)==-1){tempTabInfo=arrayTab[index]+"_"+catentryId;}else{tempTabInfo=arrayTab[index];}}else{tempTabInfo=arrayTab[index];nError=1;if(document.getElementById("compare_product_error")!=null&&document.getElementById("compare_product_error")!="undefined"){$("#compare_product_underlay").show();$("#compare_product_error").show();}else{alert("Sorry - you can not add more than 4 products into category for compare.");}}}else{tempTabInfo=tabCatgroupInfo+":"+catentryId;}}else{tempTabInfo=arrayTab[index];}tempArray+=tempTabInfo+"|";}tempArray=tempArray.substring(0,tempArray.lastIndexOf("|"));dojo.cookie(this.compareProductsCookie,tempArray,{path:"/"});if(nError==0){this.switchtoCompareNow(viewMode,catentryId);}}}else{nCompareList=nCompareList+"|"+catgroupId+":"+catentryId;dojo.cookie(this.compareProductsCookie,nCompareList,{path:"/"});this.switchtoCompareNow(viewMode,catentryId);}}}},switchtoCompareNow:function(viewMode,catentryId){if(viewMode=="list"||viewMode=="grid"){var toggleLinkId="comp"+viewMode+"_"+catentryId;checkCompareNowById(toggleLinkId);}else{if(viewMode=="quickview-main"){changeToCompareNowMain();}else{if(viewMode=="quickview-pair"){changeToCompareNowPaired();}else{changeToCompareNow();}}}},quickviewAddtoCompare:function(catgroupId,quickViewTab){if(quickViewTab=="main"){this.addtoCompare(catgroupId,window.parent.categoryDisplayJS.getQuickviewItemId(),"quickview-main");}if(quickViewTab=="paired"){this.addtoCompare(catgroupId,window.parent.categoryDisplayJS.getQuickviewPairedItemId(),"quickview-pair");}},removefromCompare:function(catgroupId,catentryId){var nCompareList=this.getCompareCookie();if(nCompareList!=null){if(catgroupId!=null&&nCompareList.indexOf(catgroupId)>-1){var tempArray="";var tempTabInfo="";var index=0;var arrayTab=nCompareList.split("|");var tabCount=arrayTab.length-1;for(index=0;index<arrayTab.length;index++){if(arrayTab[index]!=""&&arrayTab[index].indexOf(catgroupId)>-1){var tabInfo=arrayTab[index].split(":");var tabCatgroupInfo=tabInfo[0];var tabCatentryInfo=tabInfo[1];if(catgroupId==tabCatgroupInfo){if(catentryId!=null&&tabCatentryInfo!=null){var tabCatentryArray=tabCatentryInfo.split("_");if(tabCatentryInfo.indexOf(catentryId)>-1){if(tabCatentryArray.length==1){tempTabInfo="";}else{var tempItems="";for(index2=0;index2<tabCatentryArray.length;index2++){if(tabCatentryArray[index2]!=catentryId){tempItems+=tabCatentryArray[index2]+"_";}}tempItems=tempItems.substring(0,tempItems.lastIndexOf("_"));tempTabInfo=tabCatgroupInfo+":"+tempItems;}}else{tempTabInfo=arrayTab[index];}}else{tempTabInfo="";}}else{tempTabInfo=arrayTab[index];}}else{tempTabInfo=arrayTab[index];}if(tempTabInfo!=null&&tempTabInfo!=""){tempArray+=tempTabInfo+"|";}}if(tempArray!=null&&tempArray!=""){tempArray=tempArray.substring(0,tempArray.lastIndexOf("|"));dojo.cookie(this.compareProductsCookie,tempArray,{path:"/"});}else{dojo.cookie(this.compareProductsCookie,null,{path:"/",expires:-1});}}}},initializeCompareNow:function(){var compareCookieData=this.getCompareCookie();var readyCompare=$("#callReadyCOmpare").val();if(compareCookieData!=null&&compareCookieData!=""){var index=0;var categoryTabArray=compareCookieData.split("|");for(index=0;index<categoryTabArray.length;index++){if(categoryTabArray[index]!=""){var index1=0;var categoryArray=categoryTabArray[index].split(":");var vCategoryId=categoryArray[0];var catentryArray=categoryArray[1].split("_");for(index1=0;index1<catentryArray.length;index1++){var vCatentryId=catentryArray[index1];if(readyCompare=="true"){this.switchtoReadyCompare("list",vCatentryId);}else{this.switchtoCompareNow("list",vCatentryId);this.switchtoCompareNow("grid",vCatentryId);}}}}}},initializePDPCompareNow:function(productId){var compareCookieData=this.getCompareCookie();if(compareCookieData!=null&&compareCookieData!=""){var entitledItemJSON;var entitledItemId="entitledItem_"+productId;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");categoryDisplayJS.setEntitledItems(entitledItemJSON);for(x in categoryDisplayJS.entitledItems){var catentry_id=categoryDisplayJS.entitledItems[x].catentry_id;console.debug("Resolving for compare-now entitledItem_"+productId+" >> catEntryId:"+catentry_id);if(compareCookieData.indexOf(catentry_id)>-1){this.switchtoCompareNow("",catentry_id);}}}}},initializeQVCompareNow:function(productId,brands){var compareCookieData=this.getCompareCookie();if(compareCookieData!=null&&compareCookieData!=""){var entitledItemJSON;var entitledItemId="entitledItem_"+productId;if(dojo.byId(entitledItemId)!=null){entitledItemJSON=eval("("+dojo.byId(entitledItemId).innerHTML+")");window.parent.categoryDisplayJS.setEntitledItems(entitledItemJSON);if(brands=="whrus"){var selectedCatentryID=window.parent.categoryDisplayJS.getQuickviewItemId();if(compareCookieData.indexOf(selectedCatentryID)>-1){this.switchtoCompareNow("quickview-main",selectedCatentryID);}var selectedPairCatentryID=window.parent.categoryDisplayJS.getQuickviewPairedItemId();if(compareCookieData.indexOf(selectedPairCatentryID)>-1){this.switchtoCompareNow("quickview-pair",selectedPairCatentryID);}}else{if(brands=="mtgus"){var selectedCatentryID=window.parent.categoryDisplayJS.getCatalogEntryId();if(compareCookieData.indexOf(selectedCatentryID)>-1){this.switchtoCompareNow("",selectedCatentryID);}}}}}},checkCompareBtn:function(viewMode){var compareCookieData=this.getCompareCookie();var selCatEntIds="";$(".prodCompare a.addCompare.active").each(function(){if(selCatEntIds!=""){selCatEntIds=selCatEntIds+"|"+this.id;}else{selCatEntIds=this.id;}});selCatEntIds=selCatEntIds.split("comp"+viewMode+"_").join("");var selCatEntArray=new Array();selCatEntArray=selCatEntIds.split("|");if(compareCookieData!=null&&compareCookieData!=""){var index=0;var categoryTabArray=new Array();categoryTabArray=compareCookieData.split("|");for(index=0;index<categoryTabArray.length;index++){for(iCatEnt=0;iCatEnt<selCatEntArray.length;iCatEnt++){if(categoryTabArray[index].indexOf(selCatEntArray[iCatEnt],0)>-1){var categoryArray=new Array();var catentryArray=new Array();categoryArray=categoryTabArray[index].split(":");catentryArray=categoryArray[1].split("_");if(catentryArray.length>1){return true;}}}}}return false;},addtoReadyCompare:function(elmnt,catgroupId,catentryId,viewMode){if(!this.initialized){return;}var nCompareList=this.getCompareCookie();var nError=0;if(nCompareList==null||nCompareList==""){nCompareList=catgroupId+":"+catentryId;dojo.cookie(this.compareProductsCookie,nCompareList,{path:"/"});this.switchtoReadyCompare(viewMode,catentryId);}else{if(catgroupId!=null&&catgroupId!=""&&catentryId!=null&&catentryId!=""){if(nCompareList.indexOf(catgroupId)>-1){if(catentryId!==null&&nCompareList.indexOf(catentryId)>-1){if($("#btn_comp"+viewMode+"_"+catentryId).hasClass("readyCompare")&&elmnt.id=="btn_comp"+viewMode+"_"+catentryId){var url=document.getElementById("Comparelnk").value;window.open(url);}else{if($("#comp"+viewMode+"_"+catentryId).hasClass("active")){this.removefromCompare(catgroupId,catentryId);}this.switchtoReadyCompare(viewMode,catentryId);}}else{var tempArray="";var tempTabInfo="";var index=0;var arrayTab=nCompareList.split("|");var tabCount=arrayTab.length-1;for(index=0;index<arrayTab.length;index++){if(arrayTab[index]!=""&&arrayTab[index].indexOf(catgroupId)>-1){var tabInfo=arrayTab[index].split(":");var tabCatgroupInfo=tabInfo[0];var tabCatentryInfo=tabInfo[1];if(tabCatentryInfo!=null){var tabCatentryArray=tabCatentryInfo.split("_");if(tabCatentryArray.length<4){if(catentryId!==null&&tabCatentryInfo.indexOf(catentryId)==-1){tempTabInfo=arrayTab[index]+"_"+catentryId;}else{tempTabInfo=arrayTab[index];}}else{tempTabInfo=arrayTab[index];nError=1;if(document.getElementById("compare_product_error")!=null&&document.getElementById("compare_product_error")!="undefined"){$("#compare_product_underlay").show();$("#compare_product_error").show();}else{alert("Sorry - you can not add more than 4 products into category for compare.");}}}else{tempTabInfo=tabCatgroupInfo+":"+catentryId;}}else{tempTabInfo=arrayTab[index];}tempArray+=tempTabInfo+"|";}tempArray=tempArray.substring(0,tempArray.lastIndexOf("|"));dojo.cookie(this.compareProductsCookie,tempArray,{path:"/"});if(nError==0){this.switchtoReadyCompare(viewMode,catentryId);}}}else{nCompareList=nCompareList+"|"+catgroupId+":"+catentryId;dojo.cookie(this.compareProductsCookie,nCompareList,{path:"/"});this.switchtoReadyCompare(viewMode,catentryId);}}}},switchtoReadyCompare:function(viewMode,catentryId){var toggleLinkId="#comp"+viewMode+"_"+catentryId;var toggleLinkId_btn="#btn_comp"+viewMode+"_"+catentryId;var activeClass="active",compareClass="readyCompare";var btnCompare=$(".bar_compare_btn");$(toggleLinkId).toggleClass(activeClass);$(toggleLinkId_btn).toggleClass(activeClass);$(".prodCompare a.compare").removeClass(compareClass);$(".prodCompare a.compare").removeClass(activeClass);$(".prodCompare a.addCompare."+activeClass).next().addClass(activeClass);if(this.checkCompareBtn(viewMode)){btnCompare.addClass(activeClass);$(".prodCompare a.compare").removeClass(activeClass);$(".prodCompare a.addCompare."+activeClass).next().addClass(compareClass);}else{btnCompare.removeClass(activeClass);if($(".prodCompare a.compare").hasClass(compareClass)){$(".prodCompare a.addCompare."+activeClass).next().removeClass(compareClass);$(".prodCompare a.addCompare").next().removeClass(compareClass);$(".prodCompare a.addCompare").next().removeClass(compareClass);$(".prodCompare a.addCompare."+activeClass).next().addClass(activeClass);}}},addProductToCompare:function(elmnt,catgroupId,catentryId,viewMode,calledBy){if(!this.initialized){return;}var nCompareList=this.getCompareCookie();var nError=0;if(nCompareList==null||nCompareList==""){nCompareList=catgroupId+":"+catentryId;dojo.cookie(this.compareProductsCookie,nCompareList,{path:"/"});addToCompareTray(catentryId,catgroupId);readyCompare(elmnt,catentryId,viewMode,catgroupId);}else{if(catgroupId!=null&&catgroupId!=""&&catentryId!=null&&catentryId!=""){if(nCompareList.indexOf(catgroupId)>-1){if(catentryId!==null&&nCompareList.indexOf(catentryId)>-1){if(($("#comp"+viewMode+"_"+catentryId).hasClass("c_on")&&calledBy=="complist")||calledBy=="PDP"||calledBy=="PLP"){this.removefromCompare(catgroupId,catentryId);removeFromCompareTray(catentryId,catgroupId);}readyCompare(elmnt,catentryId,viewMode,catgroupId);}else{var tempArray="";var tempTabInfo="";var index=0;var arrayTab=nCompareList.split("|");var tabCount=arrayTab.length-1;for(index=0;index<arrayTab.length;index++){if(arrayTab[index]!=""&&arrayTab[index].indexOf(catgroupId)>-1){var tabInfo=arrayTab[index].split(":");var tabCatgroupInfo=tabInfo[0];var tabCatentryInfo=tabInfo[1];if(tabCatentryInfo!=null){var tabCatentryArray=tabCatentryInfo.split("_");if(tabCatentryArray.length<4){if(catentryId!==null&&tabCatentryInfo.indexOf(catentryId)==-1){tempTabInfo=arrayTab[index]+"_"+catentryId;}else{tempTabInfo=arrayTab[index];}}else{tempTabInfo=arrayTab[index];nError=1;if(document.getElementById("compare_product_error")!=null&&document.getElementById("compare_product_error")!="undefined"){$("#compare_product_underlay").show();$("#compare_product_error").show();}else{alert("Sorry - you can not add more than 4 products into category for compare.");}}}else{tempTabInfo=tabCatgroupInfo+":"+catentryId;}}else{tempTabInfo=arrayTab[index];}tempArray+=tempTabInfo+"|";}tempArray=tempArray.substring(0,tempArray.lastIndexOf("|"));dojo.cookie(this.compareProductsCookie,tempArray,{path:"/"});if(nError==0){readyCompare(elmnt,catentryId,viewMode,catgroupId);}addToCompareTray(catentryId,catgroupId);}}else{nCompareList=catgroupId+":"+catentryId+"|"+nCompareList;dojo.cookie(this.compareProductsCookie,nCompareList,{path:"/"});addToCompareTray(catentryId,catgroupId);readyCompare(elmnt,catentryId,viewMode,catgroupId);}}}updateCompareTray();},initPDPCompare:function(){var catgroupId=$("#compareCatGroupId").val();var catentryId=$("#compareCatEntId").val();var nCompareList=this.getCompareCookie();if(nCompareList!=undefined){if(catgroupId!=null&&catgroupId!=""&&catentryId!=null&&catentryId!=""){if(nCompareList.indexOf(catgroupId)>-1){$("#compare-tray-container").css("display","block");$("#complist_"+catentryId).addClass("c_on");$("#complist_"+catentryId).removeClass("c_off");if(catentryId!==null&&nCompareList.indexOf(catentryId)>-1){$("addToCompare_"+catentryId).attr("checked","checked");}}}}}};